"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[98538],{340723:function(e,t,n){n.r(t);var r,o,i,a,l={fragment:{argumentDefinitions:r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:o=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheckQuery_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},a],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c881f56582aebd78b7f3f625abfe959aa6d034bcd97439d6b4224d46c1c5f8cc",metadata:{},name:"AlreadyPinnedCheckQuery",operationKind:"query",text:null}};l.hash="bbb62c6d56086b286c3b53ed5e2cff4f",t.default=l,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(l.default||l)},410661:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};r.hash="6bb1a587f71f85424aa51845831862d4",t.default=r},308322:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheck_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};r.hash="3caf9424c2af74d2b11a6ea682b57d1b",t.default=r},786903:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],type:"Pin",abstractKey:null};r.hash="18c3db3fbed169f50cffd214f66ddd8e",t.default=r},43737:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};r.hash="f12c153dafdb70970e02775ea0db67c2",t.default=r},569483:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};r.hash="76215b7b40cb02e76b77e58c8765d0d1",t.default=r},580986:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardsPane_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPicker_pin"}],type:"Pin",abstractKey:null};r.hash="56f620fbd63abf8f7cb32f9a378198f8",t.default=r},109500:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheck_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null};r.hash="d928a4e793c8e81567357b1faa71d2e3",t.default=r},505406:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};r.hash="1a4583782792fbfe92015cb2dbe50f70",t.default=r},450634:function(e,t,n){n.r(t);var r,o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_pin",selections:[{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:r,storageKey:null},{kind:"InlineDataFragmentSpread",name:"getPinTrackingParamsMap_pin",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,concreteType:"TrackingParamsMap",kind:"LinkedField",name:"trackingParamsMap",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null}],storageKey:null}]}],args:null,argumentDefinitions:[]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null}]}],type:"Pin",abstractKey:null};o.hash="2e3ebcb8c63650cfd29ec3d68c4b1456",t.default=o},882455:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"ShuffleAsset",abstractKey:null};r.hash="58c24e25a76e7a1c4533f3b07f490517",t.default=r},738258:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardsPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_pin"}],type:"Pin",abstractKey:null};r.hash="616d5be8fea6092b51f23b548a1a5dca",t.default=r},945950:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinPane_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};r.hash="4435ca5e135b834ea8a6425f68eb2f7a",t.default=r},673500:function(e,t,n){var r=n(42279),o=n(549216),i=n(698681),a=n(226618);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){var r;return(r=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===l(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){var t=e.strategy,n=e.query,l=e.variables,s=e.options,u=e.transformGraphQL,d=e.useGetLegacyData,f=e.useGetLegacyResource,p=e.useGetLegacyPaginatedResource,y=e.rootFieldName,h=e.type1,b=e.type2,m=e.connectionName;if("GRAPHQL"===t){var v=(0,o.getRequest)(n);return null!=u?u((0,r.useLazyLoadQuery)(v,l,s)):(0,r.useLazyLoadQuery)(v,l,s)}if(null!=d&&null!=f&&null!=p)throw Error("Only pass one of useGetLegacyData or useGetLegacyResource to useLazyLoadQueryOrLegacy");if(null!=d){var g=d(l);return g?(0,a.I9)({},{data:g,refetchInfo:null,paginationInfo:null}):null}if(null!=f){var _=f(l),j=_.data,S=_.refresh;return null==j?null:(0,a.I9)({},{data:j,refetchInfo:{refetch:S},paginationInfo:null})}if(null!=p){var P=p(l),O=P.data,x=P.refresh,w=P.isFetching,I=P.isAtEnd,C=P.fetchMore;if(null==O)return null;if(null==y||null==h||null==b||null==m)throw Error("Unexpected null param");return(0,a.I9)({},{data:c({},(0,i.Cs)(y),{type:h,data:c({type:b},(0,i.Cs)("__".concat(m,"_connection")),{edges:O.map(function(e){return{node:e}})})}),refetchInfo:{refetch:x},paginationInfo:{isLoadingNext:w,hasNext:!I,loadNext:C}})}throw Error("useGetLegacyData or useGetLegacyResource must be provided")}},43665:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)},function(e){return t?r({isCanceled:!0}):r(e)})}),cancel:function(){t=!0}}}},416049:function(e,t){t.Z=2},498301:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){if(!t)return e;var n=new RegExp(/http(s?):/);if(!n.test(e)){var r=n.exec(t);r&&r.length&&(e=r[0]+e)}return e}},334688:function(e,t,n){var r=n(672652);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=null,a=!1,l=0,c=function(){i&&clearTimeout(i),a=!0,i=setTimeout(function(){a=!1},100)},s=function(){0===l&&window.addEventListener("scroll",c),l+=1},u=function(){(l-=1)||window.removeEventListener("scroll",c)};t.Z=function(){var e,t=function(e){if(Array.isArray(e))return e}(e=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,2)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],i=t[1],l=(0,r.useRef)(null);(0,r.useEffect)(function(){return s(),function(){l.current&&clearTimeout(l.current),u()}},[]);var c=function e(t){l.current&&clearTimeout(l.current),l.current=t&&a?setTimeout(function(){return e(!0)},100):setTimeout(function(){i(t)},32)};return{isHovering:n,hoverHandlers:(0,r.useRef)({onMouseOver:function(){return c(!0)},onMouseLeave:function(){return c(!1)}}).current}}},825765:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(672652),o=n(43665);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(){var e=(0,r.useRef)([]),t=(0,r.useRef)({});return(0,r.useEffect)(function(){return function(){[].concat(i(Object.keys(t.current).map(function(e){return t.current[e]})),i(e.current)).forEach(function(e){return e()})}},[]),function(n,r){if(r){var a=t.current[r];a&&(a(),delete t.current[r])}var l=(0,o.Z)(n),c=l.cancel,s=l.promise;return r?t.current[r]=c:e.current=[].concat(i(e.current),[c]),s}}},692440:function(e,t,n){n.d(t,{H:function(){return f},N:function(){return d}});var r=n(672652),o=n(342513),i=n(638747),a=n(819267);function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=(0,o.Z)("LastSavedTo"),u=s.Provider,d=s.useHook;function f(e){var t,n=e.children,o=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)())||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,2)||l(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=o[0],d=o[1];(0,i.Z8)("BoardPickerBoardsShortlistResource",function(e){s||d(e.response.resource_response.data)});var f=(0,r.useCallback)(function(e){var t=s?s.filter(function(t){return t.id!==e.id}):[];d([e].concat(function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||l(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},[s]),p=(0,r.useMemo)(function(){return{lastSavedTo:s,saveToBoard:f}},[s,f]);return(0,a.jsx)(u,{value:p,children:n})}},923075:function(e,t,n){var r=n(672652),o=n(684404),i=n(140017),a=n(317540),l=n(819267);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(s,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=y(s);if(t){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return p(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(p(e=i.call.apply(i,[this].concat(n))),"setInputRef",function(t){t&&(e._input=t)}),h(p(e),"handleKeyDown",function(t){var n=e.props,r=n.disabled,o=n.indexManager;if(!r)switch(t.which){case a.Z.ENTER:case a.Z.NUMPAD_ENTER:t.preventDefault(),o.select();break;case a.Z.UP:t.preventDefault(),o.prev();break;case a.Z.DOWN:t.preventDefault(),o.next()}}),e}return n=[{key:"componentDidMount",value:function(){this._input&&this._input.focus()}},{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.value;return(0,l.jsx)("div",{onKeyDown:this.handleKeyDown,role:"presentation",style:{width:"100%"},children:(0,l.jsx)(o.Um,{ref:this.setInputRef,accessibilityLabel:"",id:"pickerSearchField",onChange:function(e){return t(e.value)},placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:"lg",value:n})})}}],d(s.prototype,n),r&&d(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}(r.Component);t.Z=function(e){var t=(0,i.ZP)();return(0,l.jsx)(m,u(u({},e),{},{i18n:t}))}},175597:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(672652),o=n(684404),i=n(140017),a=n(218829),l=n(600959),c=n(923075),s=n(581349),u=n(503500),d=n(160390),f=n(819267);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(y,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=g(y);if(t){var r=g(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function y(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,y);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(v(e=i.call.apply(i,[this].concat(n))),"state",{searchQuery:""}),_(v(e),"handleSelectItem",function(t){var n=e.props,r=n.onCreate,o=n.onSelected;!t&&r?r(e.state.searchQuery):t&&o(t),(r||t)&&e.setState({searchQuery:""})}),_(v(e),"handleSearchQueryInput",function(t){e.setState({searchQuery:t})}),_(v(e),"renderSectionHeader",function(e){return e.title?(0,f.jsx)(o.xu,{children:(0,f.jsx)(o.xu,{paddingX:3,paddingY:1,children:(0,f.jsx)(o.xv,{size:"200",children:e.title})})}):null}),_(v(e),"renderRow",function(t){var n=t.item,r=t.hovered,o=t.sectionProps,i=e.props,a=i.boardSavedTo,l=i.isSelectMode,c=i.disabledRowId,u=e.state.searchQuery,d=(void 0===o?{}:o).inSectionSelection,p=void 0!==d&&d,y=a&&a.board===n.id?a&&a.state:null,h="board_section"===n.type;return(0,f.jsx)(s.Z,{disabled:n.id===c&&p,isSection:h,isSelectMode:l,isWithinSectionPicker:p,item:n,saveState:y,searchQuery:u,selected:r})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.boardSavedTo,n=e.createButtonLabel,r=e.hasLowBoardCount,i=e.getSections,s=e.isLoaded,p=e.onCreate,y=e.pinId;if(!s)return(0,f.jsx)(o.xu,{paddingY:5,children:(0,f.jsx)(o.$j,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility label for the loading spinner the repin picker', 'accessibility label for the loading spinner the repin picker'),show:!0})});var h=this.state.searchQuery,b=i(h);return this.indexManager=new a.Z(b.map(function(e){return e.items})),this.indexManager.setSelectItem(this.handleSelectItem),(0,f.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{zIndex:0}},direction:"column",display:"flex",flex:"grow",height:"100%",minHeight:0,overflow:"auto",children:[!r&&(0,f.jsx)(o.xu,{children:(0,f.jsx)(o.xu,{marginBottom:4,marginTop:1,paddingX:3,children:(0,f.jsx)(c.Z,{disabled:!!t,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:h})})}),(0,f.jsx)(l.Z,{disabled:!!t,grow:!r&&!h,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:b}),p&&(0,f.jsx)(o.xu,{borderStyle:b.length>1?"shadow":"none",children:(0,f.jsx)(d.Z,{buttonLabel:n,hasHoverState:!0,name:h,onClick:function(){return p(h)}})}),r&&p&&y&&(0,f.jsx)(u.Z,{onBoardSelected:p,pinId:y})]})}}],b(y.prototype,n),r&&b(y,r),Object.defineProperty(y,"prototype",{writable:!1}),y}(r.Component);function P(e){var t=(0,i.ZP)();return(0,f.jsx)(S,h(h({},e),{},{i18n:t}))}},673463:function(e,t,n){n.d(t,{j:function(){return a}});var r={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=function(e){if(!e)return"";for(var t="",n=0;n<e.length;n+=1)t+=r[e.charAt(n)]||e.charAt(n);return t},i=function(e,t){for(var n=t.split(" "),r=e.split(" "),i=0,a=0;a<r.length;a+=1)(o(r[a]).includes(n[i])||r[a].includes(n[i]))&&(i+=1);return i===n.length},a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",r=t.toLowerCase();return e.filter(function(e){return i(e[n].toLowerCase(),r)})}},42173:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(672652),o=n(71328);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var f=function(e,t){var n=e.scrollTop,r=e.clientHeight,o=e.scrollHeight;return n+r+(t?t(r):2*r)>o},p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(d,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=s(d);if(t){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return c(e)}(this,e)});function d(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return u(c(e=r.call.apply(r,[this].concat(n))),"setContainerRef",function(t){e.containerRef=t}),u(c(e),"fetchMoreIfNecessary",(0,o.Z)(function(){var t=e.props,n=t.fetchMore,r=t.scrollBuffer;n&&e.containerRef&&f(e.containerRef,r)&&n()},200)),e}return a(d.prototype,[{key:"componentDidMount",value:function(){setTimeout(this.fetchMoreIfNecessary)}},{key:"componentDidUpdate",value:function(){this.fetchMoreIfNecessary()}},{key:"render",value:function(){return(0,this.props.children)({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}]),n&&a(d,n),Object.defineProperty(d,"prototype",{writable:!1}),d}(r.PureComponent)},267508:function(e,t,n){var r=n(684404),o=n(860910),i=n(327540),a=n(819267),l=function(e){var t=e.collaborator_count,n=e.useLegoLayout,o=e.type;return n?(0,a.jsx)(r.xu,{marginEnd:t?2:0,children:(0,a.jsx)(i.Z,{type:o})}):(0,a.jsx)(i.Z,{type:o})};t.Z=function(e){var t,n=e.board,c=e.showCollaborativeIcon,s=e.showPrivateIcon,u=e.showProtectedIcon,d=e.showSectionsIcon,f=e.useLegoLayout,p=(null==n?void 0:null===(t=n.collaborating_users)||void 0===t?void 0:t.length)||0;return c||s||u||d?(0,a.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:f?0:5,children:[s&&(0,a.jsx)(l,{collaborator_count:p,type:"secret",useLegoLayout:f}),u&&(0,a.jsx)(l,{collaborator_count:p,type:"protected",useLegoLayout:f}),c&&(f?(0,a.jsx)(o.Z,{board:n,isCompact:!0,ownerOnly:!1}):(0,a.jsx)(i.Z,{type:"group"})),d&&(0,a.jsx)(i.Z,{type:"sections"})]}):null}},319510:function(e,t,n){var r=n(684404),o=n(819267);t.Z=function(e){var t=e.image_url,n=e.naturalHeight,i=e.naturalWidth;return(0,o.jsx)(r.xu,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,o.jsx)(r.zd,{height:48,rounding:2,wash:!0,width:48,children:(0,o.jsx)(r.Ee,{alt:"",naturalHeight:n,naturalWidth:i,src:t})})})}},218829:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=l(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}n.d(t,{Z:function(){return d}});var c={row:0,section:0},s={row:-1,section:-1},u=function(){},d=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.index=i({},c),this.sections=e,this.updateCallback=u,this.selectItem=u}return e=[{key:"getIndex",value:function(){return this.index}},{key:"isAtStart",value:function(){var e=this.index,t=e.row,n=e.section;return 0===t&&0===n}},{key:"isAtEnd",value:function(){var e=this.index,t=e.row,n=e.section,r=this.sections[n]||[];return this.sections.length===n+1&&r.length===t+1}},{key:"next",value:function(){if(!this.isAtEnd()){var e=this.index,t=e.row,n=e.section;t===s.row&&n===s.section?this.index=i({},c):this.sections[n].length>t+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}}},{key:"prev",value:function(){if(!this.isAtStart()){var e=this.index,t=e.row,n=e.section;if(t===s.row&&n===s.section)this.index=i({},c);else if(t>0)this.index.row-=1;else{var r=this.index.section-1;this.index={section:r,row:this.sections[r].length-1}}this.updateCallback(!0)}}},{key:"select",value:function(){var e=this.index,t=e.row,n=e.section;this.selectItem((this.sections[n]||[])[t])}},{key:"setInactive",value:function(){this.index=i({},s),this.updateCallback()}},{key:"setSelectItem",value:function(e){this.selectItem=e}},{key:"setUpdateCallback",value:function(e){this.updateCallback=e}},{key:"updateIndex",value:function(e){this.index=e,this.updateCallback()}}],a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}()},600959:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(672652),o=n(684404),i=n(42173),a=n(819267);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(y,e);var t,n,r,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=d(y);if(t){var r=d(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return u(e)}(this,e)});function y(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,y),f(u(t=p.call(this,e)),"setSelectedItemRef",function(e){t.selectedItemRef=e}),f(u(t),"handleIndexUpdate",function(e){var n=t.props.indexManager;t.setState({selectedIndex:n.getIndex(),selectionMovedByKeyboard:!!e})}),f(u(t),"handleSelectItem",function(e){return function(){var n=t.props,r=n.disabled,o=n.onSelectItem;r||o(e)}}),f(u(t),"handleMouseEnter",function(e){return function(){var n=t.props,r=n.disabled,o=n.indexManager;r||o.updateIndex(e)}}),f(u(t),"handleMouseLeave",function(){var e=t.props,n=e.disabled,r=e.indexManager;n||r.setInactive()}),f(u(t),"renderItems",function(e,n){var r=t.props.renderItem,i=t.state.selectedIndex||{},l=i.row,c=i.section,s=e.customProps,u=void 0===s?{}:s,d=e.items,f=e.renderItem,p=u.isDisabled,y=n===c,h=f||r;return h&&d.map(function(e,r){var i,c=null!==(i=null==p?void 0:p(e))&&void 0!==i&&i,s=y&&r===l;return(0,a.jsx)(o.xu,{ref:!c&&s?t.setSelectedItemRef:null,"data-test-id":"board-selection",children:c?h({item:e,hovered:s,sectionProps:u}):(0,a.jsx)(o.iP,{fullWidth:!1,onMouseEnter:t.handleMouseEnter({section:n,row:r}),onMouseLeave:t.handleMouseLeave,onTap:t.handleSelectItem(e),rounding:2,children:h({item:e,hovered:s,sectionProps:u})})},r)})}),f(u(t),"renderSections",function(){var e=t.props,n=e.renderSectionHeader;return e.sections.map(function(e,r){return(0,a.jsxs)(o.xu,{children:[n&&n(e,r),t.renderItems(e,r)]},r)})});var t,n=t.props.indexManager;return t.state={selectedIndex:n.getIndex(),selectionMovedByKeyboard:!1},n.setUpdateCallback(t.handleIndexUpdate),t}return n=[{key:"componentDidUpdate",value:function(e){var t=this.containerRef;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){var n=this.selectedItemRef;if(!(n instanceof HTMLElement))return;var r=n.getBoundingClientRect(),o=r.top,i=r.bottom,a=t.getBoundingClientRect(),l=a.top;i>=a.bottom?n.scrollIntoView(!1):o<=l&&n.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}},{key:"render",value:function(){var e=this,t=this.props,n=t.grow,r=void 0!==n&&n,l=t.maxHeight,c=t.fetchMore;return(0,a.jsx)(i.Z,{fetchMore:c,children:function(t){var n=t.setRef,i=t.onScroll;return(0,a.jsx)(o.xu,{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){e.containerRef=t,n(t)}),flex:r?"grow":void 0,height:r?"100%":void 0,maxHeight:l,onScroll:i,overflow:"auto",children:e.renderSections()})}})}}],c(y.prototype,n),r&&c(y,r),Object.defineProperty(y,"prototype",{writable:!1}),y}(r.Component)},317985:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(684404),o=n(819267),i={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function a(){return(0,o.jsx)(r.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:i,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function l(e){var t=e.disabled,n=e.name,i=e.onClick,l=e.size,c=e.submitting,s=e.text;return(0,o.jsxs)(r.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[c&&(0,o.jsx)(a,{}),(0,o.jsx)(r.zx,{color:"red",disabled:t||c,name:n,onClick:i,size:l,text:s,type:"submit"})]})}},88988:function(e,t,n){n.d(t,{Z:function(){return z}});var r,o,i=n(672652);n(42279);var a=n(684404),l=n(207012),c=n(140017),s=n(339001),u=n(819267);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}var v=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],g=function(e,t){return Math.random()*((e||1)-(t||0))+(t||0)},_=function(e){return e*(Math.PI/180)},j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=h(o);if(t){var r=h(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return b(y(e=r.call.apply(r,[this].concat(n))),"animationTimer",null),b(y(e),"canvasRemovalTimer",null),b(y(e),"containerRef",(0,i.createRef)()),b(y(e),"buildCanvas",function(){if(!e.containerRef.current)return null;var t=e.containerRef.current.getBoundingClientRect(),n=t.height,r=t.width,o=2.5*n,i=document.createElement("canvas");return i.style.position="absolute",i.style.left="".concat(0-(o-r)/2,"px"),i.style.top="".concat(0-(o-n)/2,"px"),i.style.pointerEvents="none",i.style.width="".concat(o,"px"),i.style.height="".concat(o,"px"),i.style.overflow="visible",i.width=o,i.height=o,i}),b(y(e),"explode",function(){var t=e.buildCanvas(),n=e.containerRef.current;if(t&&n){var r=t.getContext("2d");n.prepend(t),function e(t,n,r,o){window.requestAnimationFrame(function(){return e(t,n,r,o)}),n.clearRect(0,0,r,o),t.forEach(function(e){e.x+=e.speed*Math.cos(_(e.degree)),e.y+=e.speed*Math.sin(_(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(n.beginPath(),n.globalAlpha=e.opacity,n.fillStyle=e.color,n.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),n.fill())})}(Array.from(Array(120)).map(function(){return{x:t.width/2,y:t.height/2,radius:Math.round(g(10,30)),color:v[Math.floor(Math.random()*v.length)],degree:Number(g(0,360).toFixed(1)),speed:Math.round(g(0,25)),friction:.9,opacity:Number(g(0,.5).toFixed(1)),yVel:0,gravity:.04}}),r,t.width,t.height),e.canvasRemovalTimer=setTimeout(function(){n.removeChild(t)},(e.props.delay||0)+800)}}),e}return f(o.prototype,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.delay,r=t.startAnimation,o=e.startAnimation;r&&o!==r&&(this.animationTimer=setTimeout(this.explode,n))}},{key:"componentWillUnmount",value:function(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}},{key:"render",value:function(){return(0,u.jsx)(a.xu,{ref:this.containerRef,position:"relative",children:this.props.children})}}]),n&&f(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(i.PureComponent);b(j,"defaultProps",{delay:0});var S=["pinKey","shuffleAssetKey"];function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){k(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==P(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}var T=void 0!==r?r:r=n(786903),R=void 0!==o?o:o=n(43737),B=function(e,t,n,r){var o,i,a,l,c,s={},u=null===(o=n.current)||void 0===o?void 0:o.getBoundingClientRect(),d=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect(),f=null===(a=r.current)||void 0===a?void 0:a.getBoundingClientRect();if(d&&u&&f){s={left:u.left-d.left,top:u.top-d.top};var p={x:f.left-u.left,y:f.top-u.top},y={x:(f.width-u.width)/2,y:(f.height-u.height)/2};l="translate(".concat(p.x,"px, ").concat(p.y,"px)"),c="translate(".concat(y.x,"px, ").concat(y.y,"px)")}return{mask:{position:"absolute",left:s.left,top:s.top,width:e?null==f?void 0:f.width:null==u?void 0:u.width,height:e?null==f?void 0:f.height:null==u?void 0:u.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?l:"none",transform:e?l:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:null==u?void 0:u.width,height:null==u?void 0:u.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?c:"none",transform:e?c:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}},D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(l,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=A(l);if(t){var r=A(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return C(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(C(e=o.call.apply(o,[this].concat(n))),"state",{isInitialized:!1}),k(C(e),"containerRef",(0,i.createRef)()),k(C(e),"pinDestinationRef",(0,i.createRef)()),e}return n=[{key:"componentDidMount",value:function(){var e=this;window.requestAnimationFrame(function(){e.setState({isInitialized:!0})})}},{key:"componentWillUnmount",value:function(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}},{key:"componentDidUpdate",value:function(){var e=this.state.isInitialized,t=this.props.onDismiss;e&&t&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(t,2600))}},{key:"render",value:function(){var e,t,n,r,o,l=this.props,c=l.pin,d=l.firstRepin,f=l.pinImageRef,p=l.selectedBoardName,y=l.shuffleAsset,h=null!==(e=null==y?void 0:y.cutoutImages)&&void 0!==e?e:null==c?void 0:c.imageSpec_236x,b=null!==(t=null==c?void 0:c.description)&&void 0!==t?t:"",m=null!==(n=null==h?void 0:h.height)&&void 0!==n?n:1,v=null!==(r=null==h?void 0:h.width)&&void 0!==r?r:1,g=null!==(o=null==h?void 0:h.url)&&void 0!==o?o:"",_=this.state.isInitialized,S=B(_,this.containerRef,f,this.pinDestinationRef),P=S.mask,O=S.imageContainer;return(0,u.jsx)(i.Fragment,{children:(0,u.jsxs)(a.xu,{ref:this.containerRef,bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:[(0,u.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:P},maxHeight:335,overflow:"hidden",children:(0,u.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:O},children:(0,u.jsx)(a.Ee,{alt:b,naturalHeight:m,naturalWidth:v,src:g})})}),(0,u.jsx)(a.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:_?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1}},left:!0,position:"absolute",right:!0,top:!0,children:(0,u.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:_?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}},direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,u.jsx)(j,{delay:1250,startAnimation:_,children:(0,u.jsx)(a.zd,{height:180,rounding:2,width:270,children:(0,u.jsxs)(a.kC,{alignItems:"stretch",height:"100%",justifyContent:"start",width:"100%",children:[(0,u.jsx)(a.xu,{ref:this.pinDestinationRef,color:"transparent",flex:"grow",height:"100%",marginEnd:1}),(0,u.jsxs)(a.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:80,children:[(0,u.jsx)(a.xu,{color:"secondary",flex:"grow",marginBottom:1}),(0,u.jsx)(a.xu,{color:"secondary",flex:"grow"})]})]})})}),(0,u.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{opacity:_?1:0,WebkitTransform:_?"translateY(0)":"translateY(20%)",transform:_?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"}},"data-test-id":"board-saved-heading",paddingX:2,children:(0,u.jsx)(a.X6,{align:"center",children:d?(0,s.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First board create confirmation message', 'First board create confirmation message'),{selectedBoardName:null!=p?p:""}):(0,s.nk)(this.props.i18n._('You saved this Pin to {{ selectedBoardName }}!', 'Board create confirmation message', 'Board create confirmation message'),{selectedBoardName:null!=p?p:""})})})]})})]})})}}],w(l.prototype,n),r&&w(l,r),Object.defineProperty(l,"prototype",{writable:!1}),l}(i.PureComponent);function z(e){var t=e.pinKey,n=e.shuffleAssetKey,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,S),o=(0,c.ZP)(),i=(0,l.Z)(T,t),a=(0,l.Z)(R,n);return(0,u.jsx)(D,x(x({},r),{},{i18n:o,pin:i,shuffleAsset:a}))}k(D,"defaultProps",{firstRepin:!1})},860910:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(684404),o=n(140017),i=n(339001),a=n(149722),l=n(819267);function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e){var t,n,r,o,i=null!==(t=null!==(n=null==e?void 0:e.imageMediumUrl)&&void 0!==n?n:null==e?void 0:e.image_medium_url)&&void 0!==t?t:"";return{name:null!==(r=null!==(o=null==e?void 0:e.fullName)&&void 0!==o?o:null==e?void 0:e.full_name)&&void 0!==r?r:"",src:"https://s.pinimg.com/images/user/default_75.png"===i?void 0:i}}function d(e){var t,n,s,d,f,p=e.board,y=e.forceViewer,h=e.isCompact,b=e.ownerOnly,m=(0,o.ZP)(),v=(0,a.Z)(),g=b?[u(null==p?void 0:p.owner)]:(function(e,t,n){var r=null!=e?e:{},o=r.collaborated_by_me,i=r.collaborating_users,a=r.owner,l=null!=i?i:[],s=[a];if(o||n){var u=l.findIndex(function(e){return t.isAuth&&e.id===t.id});if(-1!==u){var d=l.splice(u,1)[0];s.push(d)}else s.push(t)}var f=c(l).sort(function(e,t){var n,r,o,i;return(null!==(n=e.full_name)&&void 0!==n?n:"")>(null!==(r=t.full_name)&&void 0!==r?r:"")?1:(null!==(o=t.full_name)&&void 0!==o?o:"")>(null!==(i=e.full_name)&&void 0!==i?i:"")?-1:0});return[].concat(s,c(f))})(p,v,y).map(u),_=g.slice(0,3).map(function(e){return e.name}),j="";switch(g.length){case 3:j=(0,i.Wc)("".concat(m._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')),{first:"".concat(null!==(t=_[0])&&void 0!==t?t:""),second:"".concat(null!==(n=_[1])&&void 0!==n?n:""),last:"".concat(null!==(s=_[2])&&void 0!==s?s:"")});break;case 2:j=(0,i.Wc)("".concat(m._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')),{first:"".concat(null!==(d=_[0])&&void 0!==d?d:""),second:"".concat(null!==(f=_[1])&&void 0!==f?f:"")});break;default:j=_.join(", ")}var S=g.length>3?(0,i.Wc)(", ".concat(m.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', g.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars')),{userNames:j,leftCount:"".concat(g.length-3)}):(0,i.Wc)(", ".concat(m._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')),{userNames:j});return(0,l.jsx)(r.HE,{accessibilityLabel:S,collaborators:g,size:h?"xs":"sm"})}},402287:function(e,t,n){n.d(t,{$n:function(){return S},A4:function(){return w},CE:function(){return m},ET:function(){return E},F$:function(){return j},Kw:function(){return A},Nv:function(){return C},PA:function(){return x},X_:function(){return k},d9:function(){return P},e1:function(){return b},o4:function(){return I},vB:function(){return g}});var r=n(654369),o=n(216167),i=n(107366),a=n(227258),l=n(827625),c=n(821419),s=n(64819),u=n(430408),d=n(539426),f=n(937310);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e){return function(t){var n=e.boardId,r=e.sectionIdBefore,o=e.sectionIdAfter,a=e.sourceSectionId,l=e.targetSectionId;t((0,s._f)({feedType:f.Z.BOARD_SECTIONS,feedId:n,itemType:"boardsection",sourceItemId:a,targetItemId:l}));var c=Object.freeze({});return r&&(c=h(h({},c),{},{section_before:r})),o&&(c=h(h({},c),{},{section_after:o})),(0,i.Z)({url:"/v3/board/sections/".concat(a,"/reorder/"),method:"POST",data:c})}}function m(e,t){return function(n){return n((0,a.U)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}}function v(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function g(e,t,n,r){var i=e.boardId,a=e.sourceBoardId,d=void 0===a?"":a,p=e.sourceSectionId,y=void 0===p?"":p,b=e.name,m=e.nameSource,g=e.pinImport,_=e.initialPinIds,j=0;"RECOMMENDATION"===m?j=1:"EDITED_RECOMMENDATION"===m&&(j=2);var S=h({board_id:i,initial_pins:g&&!g.all?g.pinIds:void 0===_?[]:_,name:b,name_source:j},n?{orbac_subject_id:n}:Object.freeze({}));return function(e){return o.Z.create("BoardSectionResource",S).callCreate({showError:!1}).then(function(o){var a=o.resource_response.data;r({event_type:7100,object_id_str:a.id}),e(v(i,a)),e((0,s.vX)({feedId:i,feedType:f.Z.BOARD_SECTIONS,itemIds:[a.id],itemType:"boardsection"})),e((0,c.Tq)(i,"pin_count")),e((0,l.jB)("BoardSectionsRepinResource",{board_id:i,orbac_subject_id:n}));var p=g||{all:!1,pinIds:[]},h=p.all,b=p.pinIds;return h?new Promise(function(n,r){return e((0,u.Z)({inverseSelection:!0,selectedPinIds:b,source:{boardId:d||i,sectionId:y||null},target:{boardId:i,sectionId:a.id}},t)).then(function(){return n(a)}).catch(r)}):(b.length>0&&e((0,s.N8)(f.Z.BOARDFEED,i)),a)})}}function _(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}function j(e,t,n){return function(r){return o.Z.create("BoardSectionEditResource",h({section_id:t},n?{orbac_subject_id:n}:Object.freeze({}))).callDelete({showError:!1}).then(function(){return Promise.all([r(_(e,t)),r((0,s.EX)({feedId:e,feedType:f.Z.BOARD_SECTIONS,itemIds:[t],itemType:"boardsection"})),r((0,c.Tq)(e,"pin_count")),r((0,l.jB)("BoardSectionsRepinResource",{board_id:e,orbac_subject_id:n}))])})}}function S(e,t,n,r){return function(i){return o.Z.create("BoardSectionEditResource",h({section_id:t,title:n},r?{orbac_subject_id:r}:Object.freeze({}))).callCreate({showError:!1}).then(function(t){var n=t.resource_response.data;return i(function(t){var r,o,i,a,l,u=n.board;u&&u.id!==e?(t(_(e,null!==(r=n.id)&&void 0!==r?r:"")),t((0,s.EX)({feedId:e,feedType:f.Z.BOARD_SECTIONS,itemIds:[null!==(o=n.id)&&void 0!==o?o:""],itemType:"boardsection"})),t((0,c.Tq)(e,"pin_count")),t(v(null!==(i=u.id)&&void 0!==i?i:"",n)),t((0,s.vX)({feedId:null!==(a=u.id)&&void 0!==a?a:"",feedType:f.Z.BOARD_SECTIONS,itemIds:[null!==(l=n.id)&&void 0!==l?l:""],itemType:"boardsection"})),t((0,c.Tq)(e,"pin_count"))):t({type:"SECTION_UPDATED",payload:{boardId:e,section:n}})}),i((0,l.jB)("BoardSectionsRepinResource",{board_id:e,orbac_subject_id:r})),n})}}function P(e,t,n){return function(r){return(0,i.Z)({url:"/v3/board/sections/".concat(t,"/merge/").concat(n,"/"),method:"POST",data:{fields:["boardsection.id","boardsection.board()","board.id","board.blocking_actions"]}}).then(function(o){return Promise.all([r(_(e,t)),r((0,l.jB)("BoardSectionsRepinResource",{board_id:e})),r(m(n)),r((0,s.N8)(f.Z.BOARD_SECTION_PINS,n))]).then(function(){return o})})}}var O=function(e,t){return{type:"BOARD_SECTION_EDIT",payload:t}},x=function(e,t){return function(n){return o.Z.create("BoardSectionEditResource",h(h({},t),{},{section_id:e})).callCreate().then(function(r){return n(O(e,t)),r.resource_response.data})}},w=function(e){return function(t){return o.Z.create("BoardSectionResource",{section_id:e}).callGet().then(function(n){return t(O(e,n.resource_response.data||{id:"",title:""})),n})}},I=function(e,t,n,r){return function(i){var a=o.Z.create("BoardSectionEditResource",{section_id:t}).callDelete();return i({type:"BOARD_SECTION_DELETE",payload:{userId:e,boardSectionId:t,boardId:n,pinCount:r}}),a}},C=function(e,t,n,i){return function(a){var c={board_id:e,initial_pins:t,name:n},u="BoardSectionResource";return o.Z.create(u,c).callCreate().then(function(n){var o=n.resource_response.data,p=(0,r.Fv)(o,d.Z[u]);return i({event_type:7100,object_id_str:o.id}),a((0,l.XM)(u,c,n,p)),a(v(e,o)),a((0,s.vX)({feedId:e,feedType:f.Z.BOARD_SECTIONS,itemIds:[o.id],itemType:"boardsection"})),t.length&&a({type:"PINS_MOVE",payload:{source:{boardId:e},target:{boardId:e,sectionId:o.id},pinIds:t}}),n})}},A=function(e){return function(t){var n=e.source,i=e.target,a=e.pinIds;if(t({type:"PINS_MOVE",payload:e}),n.boardlessPins||i.boardId!==n.boardId){var c={board_id:i.boardId,pin_ids:a,section_id:i.sectionId};return o.Z.create("BulkEditResource",c).callUpdate()}if(i.sectionId){var s={section_id:i.sectionId,pins:a},u="BoardSectionEditResource";return o.Z.create(u,s).callUpdate().then(function(e){var n=(0,r.Fv)(e.resource_response.data,d.Z[u]);return t((0,l.XM)(u,s,e,n)),e})}var f={section_id:n.sectionId,pins:a};return o.Z.create("BoardSectionPinsResource",f).callDelete()}},k=function(e){return function(t){t({type:"PINS_MOVE_ALL",payload:e});var n=e.source,r=e.target,i=e.excludePinIds,a={board_id:n.boardId,new_board_id:r.boardId,pin_ids:i,old_section_id:n.sectionId,new_section_id:r.sectionId};return o.Z.create("BulkEditSelectAllResource",a).callUpdate()}},E=function(e,t,n,r,o){return function(i){return i(C(e,[],t,o)).then(function(t){return i(k({source:{boardId:e,sectionId:r},target:{boardId:e,sectionId:t.resource_response.data.id},excludePinIds:n}))})}}},430408:function(e,t,n){n.d(t,{Z:function(){return p},S:function(){return f}});var r=n(216167),o=n(821419),i=n(402287),a=n(64819),l=n(937310),c=n(622888),s=function(e){return function(t){c.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(t,e))}},u=function(e){return(0,a.N8)(e.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,e.sectionId||e.boardId)};function d(e,t){var n=e.source,r=e.target;r.boardId!==n.boardId?(t((0,o.Tq)(n.boardId,"pin_count")),t((0,o.Tq)(r.boardId,"pin_count"))):n.sectionId&&r.sectionId||t((0,o.Tq)(r.boardId,"pin_count")),n.sectionId&&t((0,i.CE)(n.sectionId)),r.sectionId&&t((0,i.CE)(r.sectionId))}function f(e){return function(t){var n=e.selectedPinIds,r=e.source,o=e.target;t((0,a.EX)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:n,itemType:"pin"})),t((0,a.vX)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:n,itemType:"pin"})),d(e,t)}}function p(e,t){return function(n){return(function(e,t,n){var o=e.inverseSelection,i=e.selectedPinIds,c=e.source,d=e.target,f=e.orbacSubjectId;if(c.boardId===d.boardId&&(c.sectionId||null)===(d.sectionId||null))return Promise.reject();if(o){var p={board_id:c.boardId,new_board_id:d.boardId,old_section_id:c.sectionId||void 0,new_section_id:d.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return r.Z.create("BulkEditSelectAllResource",p).callUpdate({showError:!1}).then(function(){return Promise.all([t(u(c)),t(u(d))])}).catch(s(n))}var y=function(e,n){t((0,a.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,a.vX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:i,itemType:"pin"}))};y(c,d);var h=function(){return y(d,c)};if(d.boardId===c.boardId){if(d.sectionId){var b={section_id:d.sectionId,pins:i,orbac_subject_id:f};return r.Z.create("BoardSectionEditResource",b).callUpdate({showError:!1}).catch(function(e){h(),s(n)(e)})}var m={section_id:c.sectionId,pins:i,orbac_subject_id:f};return r.Z.create("BoardSectionPinsResource",m).callDelete({showError:!1}).catch(function(e){h(),s(n)(e)})}var v={board_id:d.boardId,section_id:d.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return r.Z.create("BulkEditResource",v).callUpdate({showError:!1}).catch(function(e){h(),s(n)(e)})})(e,n,t).then(function(){return d(e,n)})}}},581349:function(e,t,n){n.d(t,{W:function(){return u}});var r=n(684404),o=n(481177),i=n(140017),a=n(267508),l=n(319510),c=n(327540),s=n(819267);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.length>1?RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce(function(n,r,o){if(n.length>0&&e&&e.length){var i=t.toLowerCase().indexOf(e.toLowerCase());return n.concat((0,s.jsx)("em",{style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"},children:t.substring(i,i+e.length)},o),r)}return[r]},[]):t}t.Z=function(e){var t,n,d,f,p,y,h=(0,i.ZP)(),b=e.disabled,m=e.item,v=e.isSection,g=e.isSelectMode,_=e.isWithinSectionPicker,j=e.saveState,S=e.searchQuery,P=e.selected,O=v?null:m,x=v?m:null,w=x&&x.title||O&&O.name||"",I="",C=!1,A="",k=0;if(O){I=O.image_cover_url,C=O.is_collaborative,A=O.privacy;var E=O.section_count;k=void 0===E?0:E}var T=u(S,w),R=A===o.Z.BoardPrivacy.SECRET,B=!b&&(P||!!j),D=!_&&"number"==typeof k&&k>0,z="number"==typeof k&&k>0?"boardWithSection":"boardWithoutSection",Z=g?h._('Select', 'Board select button label', 'Board select button label'):h._('Save', 'Pin save button label', 'Pin save button label');return(0,s.jsxs)(r.xu,{alignItems:"center",color:B?"secondary":"default","data-test-id":z,display:"flex",height:64,marginEnd:2,marginStart:2,marginTop:1,padding:2,rounding:3,children:[O&&(0,s.jsx)(r.xu,{color:"secondary",flex:"none",height:48,marginEnd:2,overflow:"hidden",rounding:2,width:48,children:I?(0,s.jsx)(r.Ee,{alt:h._('Board cover image', 'boardPickerRow.image.altText', 'alt text for a board cover image'),fit:"cover",naturalHeight:1,naturalWidth:1,src:I}):(0,s.jsx)("span",{})}),x&&!!(null!==(t=x.preview_pins)&&void 0!==t&&t.length)&&(0,s.jsx)(l.Z,{image_url:null!==(n=x.preview_pins[0].image_square_url)&&void 0!==n?n:"",naturalHeight:null!==(d=null===(f=x.preview_pins[0].image_square_size_pixels)||void 0===f?void 0:f.height)&&void 0!==d?d:1,naturalWidth:null!==(p=null===(y=x.preview_pins[0].image_square_size_pixels)||void 0===y?void 0:y.width)&&void 0!==p?p:1}),(0,s.jsxs)(r.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,s.jsx)(r.xv,{color:b?"subtle":"default",lineClamp:1,size:"300",weight:"bold",children:T}),(D||!B)&&(0,s.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[R&&(0,s.jsx)(c.Z,{type:"secret"}),C&&(0,s.jsx)(a.Z,{board:O,showCollaborativeIcon:C,useLegoLayout:!0}),D&&(0,s.jsx)(c.Z,{type:"sections"})]}),!D&&B&&!j&&(0,s.jsx)(r.xu,{alignItems:"center",color:"primary","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:(0,s.jsx)(r.xv,{color:"inverse",overflow:"normal",size:"300",weight:"bold",children:Z})}),!D&&B&&"loading"===j&&(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,s.jsx)(r.$j,{accessibilityLabel:h._('Saving', 'Accessibility label for saving a pin to a board', 'Accessibility label for saving a pin to a board'),show:!0})})]})]})}},327540:function(e,t,n){var r=n(684404),o=n(140017),i=n(819267);t.Z=function(e){var t=e.type,n=(0,o.ZP)(),a={group:{accessibilityLabel:n._('group board', 'Board picker group board icon', 'Board picker group board icon'),icon:"people"},protected:{accessibilityLabel:n._('protected board', 'Board picker protected board icon', 'Board picker protected board icon'),icon:"protect"},secret:{accessibilityLabel:n._('secret board', 'Board picker secret board icon', 'Board picker secret board icon'),icon:"lock"},sections:{accessibilityLabel:n._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:n._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-down"}}[t];return(0,i.jsx)(r.xu,{marginStart:1,children:(0,i.jsx)(r.xu,{marginStart:2,children:"sections"===t||"sectionsInline"===t?(0,i.jsx)(r.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:"12"}):(0,i.jsx)(r.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:16})})})}},503500:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(672652),o=n(684404),i=n(214877),a=n(140017),l=n(757640),c=n(819267);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=p(i);if(t){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return f(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return y(f(e=r.call.apply(r,[this].concat(n))),"state",{isHovering:!1}),y(f(e),"onHover",function(){e.setState({isHovering:!0})}),y(f(e),"offHover",function(){e.setState({isHovering:!1})}),e}return u(i.prototype,[{key:"render",value:function(){var e,t,n,r=this.props,i=r.name,a=r.selected,l=r.image;return r.inFlyoutExp?(0,c.jsxs)(o.xu,{alignItems:"center",color:this.state.isHovering?"secondary":"transparent",direction:"row",display:"flex",onMouseOut:this.offHover,onMouseOver:this.onHover,paddingX:4,paddingY:2,children:[(0,c.jsx)(o.xu,{children:(0,c.jsx)(o.zd,{height:40,rounding:2,width:40,children:this.state.isHovering&&l?(0,c.jsx)(o.Ee,{alt:"",color:"",fit:"cover",naturalHeight:null!==(e=l.height)&&void 0!==e?e:1,naturalWidth:null!==(t=l.width)&&void 0!==t?t:1,src:null!==(n=l.url)&&void 0!==n?n:""}):(0,c.jsx)(o.xu,{color:"secondary",height:40,width:40})})}),(0,c.jsx)(o.xu,{padding:2,children:(0,c.jsx)(o.X6,{size:"400",children:i})})]}):(0,c.jsxs)(o.xu,{alignItems:"center",color:a?"secondary":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,c.jsx)(o.xu,{children:(0,c.jsx)(o.JO,{accessibilityLabel:"",color:a?"default":"subtle",icon:"add"})}),(0,c.jsx)(o.xu,{marginStart:3,children:(0,c.jsx)(o.xv,{color:a?"default":"subtle",weight:"bold",children:i})})]})}}]),n&&u(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t,n,s=e.inFlyoutExp,u=e.inFirstBoardCreateGestaltExp,d=e.pinId,f=e.image,p=e.minHeight,y=e.onBoardSelected,h=(0,i.v)().logContextEvent,v=(0,a.ZP)(),g=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(-1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),_=g[0],j=g[1],S=(0,l.Z)({name:"ApiResource",options:{url:"/v3/pins/".concat(String(d),"/board_title_suggestions/"),pin_id:d}}),P=S.data,O=S.isLoaded,x=(n=void 0===P?[]:P,(0,r.useMemo)(function(){return n&&n.length?n.map(function(e){return e.title}):[]},[n])),w=function(e){y(x[e],!1),h({event_type:101,component:13025,element:23})},I=function(e){j(e)},C=function(){j(-1)},A=function(e,t){var n=_===t;return(0,c.jsx)("li",{children:(0,c.jsx)(o.iP,{onMouseEnter:function(){return I(t)},onMouseLeave:C,onTap:function(){return w(t)},children:(0,c.jsx)(b,{image:f,inFlyoutExp:s,name:e,selected:n})})},t)};return O?x&&x.length?s?(0,c.jsx)(o.xu,{children:(0,c.jsx)("ul",{children:x.map(A)})}):u?(0,c.jsxs)(o.xu,{children:[(0,c.jsx)(o.xu,{marginBottom:3,marginStart:6,marginTop:5,children:(0,c.jsx)(o.xv,{children:v._('Suggested board names', 'text above suggested board names list', 'text above suggested board names list')})}),(0,c.jsx)("ul",{children:x.map(A)})]}):(0,c.jsxs)(o.xu,{children:[(0,c.jsx)(o.xu,{marginTop:2,paddingX:5,children:(0,c.jsx)(o.xv,{children:v._('Suggested board names', ' - ', ' -- ')})}),(0,c.jsx)("ul",{children:x.map(A)})]}):null:(0,c.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:p||"",children:(0,c.jsx)(o.$j,{accessibilityLabel:v._('Loading board suggestions', 'Accesibility label for loading board suggestions', 'Accesibility label for loading board suggestions'),show:!0})})}},160390:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(684404),o=n(140017),i=n(334688),a=n(819267);function l(e){var t=(0,o.ZP)(),n=e.buttonLabel,l=e.hasHoverState,c=e.name,s=e.onClick,u=(0,i.Z)(),d=u.isHovering,f=u.hoverHandlers,p=c||n||t._('Create board', ' - ', ' -- ');return(0,a.jsx)(r.iP,{onMouseEnter:f.onMouseOver,onMouseLeave:f.onMouseLeave,onTap:s,children:(0,a.jsxs)(r.xu,{alignItems:"center",color:l&&d?"secondary":"default",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,a.jsx)(r.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},marginEnd:2,rounding:2,children:(0,a.jsx)(r.JO,{accessibilityLabel:"",color:"default",icon:"add",size:20})}),c?(0,a.jsx)(r.xu,{margin:1,children:(0,a.jsxs)(r.xv,{inline:!0,overflow:"normal",children:[" ",t._('Create: ', ' - ', ' -- ')," "]})}):null,(0,a.jsxs)(r.xv,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",p," "]})]})})}},916964:function(e,t,n){var r=n(672652),o=n(780277),i=n(684404),a=n(587703),l=n(140017),c=n(317540),s=n(149722),u=n(785059),d=n(199677),f=n(317985),p=n(402287),y=n(819267);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=j(a);if(t){var r=j(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return _(e)}(this,e)});function a(e){var t;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a),S(_(t=o.call(this,e)),"onCreateSection",function(){var e=t.props,n=e.board,r=e.sourceBoard,o=e.sourceSection,i=e.dispatch,a=e.completeCreateSectionAction,l=e.pinImport,c=e.viewer,s=e.orbacActingAs,u=e.logContextEvent,f=(0,d.lJ)(c,s);return t.setState({isSaving:!0}),i((0,p.vB)({boardId:n.id,sourceBoardId:r&&r.id,sourceSectionId:o&&o.id,name:t.state.inputName.trim(),pinImport:l},t.props.i18n,f,u)).then(function(e){t.setState({isSaving:!1}),a(e)}).catch(function(e){t.setState({createError:e.message_detail||e.message,isSaving:!1})})}),S(_(t),"handleKeyDown",function(e){var n=e.event,r=t.state,o=r.createError,i=r.inputName;[c.Z.ENTER,c.Z.NUMPAD_ENTER].includes(n.which)&&!o&&i.trim()&&t.onCreateSection()}),S(_(t),"handleChangeName",function(e){var n=e.value;t.setState({createError:null,inputName:n})}),S(_(t),"handleInputRef",function(e){t.setState({inputRef:e})}),t.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1},t}return n=[{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=n.createError,o=n.inputRef;o&&(!t.inputRef||r)&&o.focus()}},{key:"render",value:function(){var e=this.props,t=e.showTitle,n=e.positionRelative,r=this.state,o=r.createError,a=r.inputName,l=r.isSaving,c=!!a.trim()&&!o;return(0,y.jsxs)(i.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:n?"relative":"absolute",right:!0,rounding:2,top:!0,width:"100%",children:[t&&(0,y.jsx)(i.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,y.jsx)(i.X6,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,y.jsxs)(i.xu,{padding:4,children:[(0,y.jsx)(i.xu,{marginBottom:2,children:(0,y.jsx)(i.__,{htmlFor:"sectionEditName",children:(0,y.jsx)(i.xv,{color:o?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,y.jsx)(i.xu,{children:(0,y.jsx)(i.xu,{ref:this.handleInputRef,children:(0,y.jsx)(i.nv,{errorMessage:o||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:a})})})]}),(0,y.jsx)(i.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,y.jsx)(i.xu,{padding:4,children:(0,y.jsx)(i.kC,{alignItems:"stretch",justifyContent:"end",children:(0,y.jsx)(f.Z,{disabled:!c||l,onClick:this.onCreateSection,submitting:l,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}}],v(a.prototype,n),r&&v(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);t.Z=function(e){var t=(0,o.useDispatch)(),n=(0,l.ZP)(),r=(0,s.Z)(),i=(0,u.Z)();return(0,y.jsx)(O,m(m({},e),{},{dispatch:t,i18n:n,logContextEvent:(0,a.Z)(),orbacActingAs:i,viewer:r}))}},751279:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(684404),o=n(139655),i=n(819267);function a(e){var t=e.url,n=e.description,a=e.color;return a=a||"#8fa7bf",(0,i.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{background:a}},height:216,rounding:2,width:"100%",children:(0,i.jsxs)(r.xu,{maxHeight:200,overflow:"hidden",padding:4,children:[t&&(0,i.jsx)(r.xu,{marginBottom:2,children:(0,i.jsx)(r.xv,{color:"inverse",size:"100",children:(0,o.Z)(t).hostname||t})}),(0,i.jsx)(r.xu,{maxHeight:144,children:(0,i.jsx)(r.xv,{color:"inverse",overflow:"normal",weight:"bold",children:n})})]})})}},540554:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(672652),o=n(684404),i=n(107366),a=n(388769),l=n(140017),c=n(339001),s=n(317540),u=n(825765),d=n(819267);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,n,r,l=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=v(u);if(t){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return m(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(m(e=l.call.apply(l,[this].concat(n))),"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),g(m(e),"onDismiss",function(){}),g(m(e),"mounted",!1),g(m(e),"addHashtag",function(t){e.props.addHashtag(t),e.setState({recommendations:[]})}),g(m(e),"handleKeyDown",function(t){t.keyCode===s.Z.UP?e.handlePrevHashtag(t):t.keyCode===s.Z.DOWN?e.handleNextHashtag(t):t.keyCode===s.Z.ESCAPE?e.handleClose(t):t.keyCode===s.Z.ENTER&&e.handleSubmit(t)}),g(m(e),"handlePrevHashtag",function(t){t.preventDefault(),e.state.selectedIndex>0&&e.setState(function(e){return{selectedIndex:e.selectedIndex-1}})}),g(m(e),"handleNextHashtag",function(t){t.preventDefault(),e.state.selectedIndex<e.state.recommendations.length-1&&e.setState(function(e){return{selectedIndex:e.selectedIndex+1}})}),g(m(e),"handleClose",function(t){t.preventDefault(),e.setState({recommendations:[]})}),g(m(e),"handleSubmit",function(t){t.preventDefault(),e.addHashtag(e.state.recommendations[e.state.selectedIndex].query)}),g(m(e),"callResource",function(t){(0,e.props.makeCancelablePromise)((0,i.Z)({url:"/v3/search/autocomplete/",data:{q:t,show_pin_count:!0}}),"typeahead").then(function(t){if(e.mounted){var n=t.resource_response.data;e.setState({recommendations:n.slice(0,5),resourceLoaded:!0})}}).catch(function(t){t.isCanceled||e.setState({resourceLoaded:!1})})}),e}return n=[{key:"componentDidMount",value:function(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.recommendations,r=t.resourceLoaded,i=t.selectedIndex,l=this.props,s=l.anchor,u=l.idealDirection,f=n.filter(function(e){return e.query}),p="flyout_"+f.length;return r&&f.length>0?(0,d.jsx)(o.J2,{anchor:s,idealDirection:u||"down",onDismiss:this.onDismiss,size:"sm",children:(0,d.jsx)(o.xu,{width:"100%",zIndex:new o.Ry(3),children:f.length>0?f.map(function(t,n){return(0,d.jsx)(o.iP,{fullWidth:!1,onTap:function(){return e.addHashtag(t.query)},children:(0,d.jsxs)(o.xu,{alignItems:"center",color:n===i?"secondary":"transparent",display:"flex",justifyContent:"between",padding:1,children:[(0,d.jsx)(o.xu,{flex:"grow",children:(0,d.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:t.query})}),(0,d.jsx)(o.xu,{flex:"none",children:(0,d.jsx)(o.xv,{inline:!0,size:"100",children:(0,c.nk)(e.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(t.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,d.jsx)(a.Z,{value:Number(t.pin_count)},"pinCount")})})})]})},t.query)}):null})},p):null}}],h(u.prototype,n),r&&h(u,r),Object.defineProperty(u,"prototype",{writable:!1}),u}(r.Component);function S(e){var t=(0,l.ZP)(),n=(0,u.Z)();return(0,d.jsx)(j,y(y({},e),{},{i18n:t,makeCancelablePromise:n}))}},662058:function(e,t,n){n.d(t,{Z:function(){return Z}});var r,o,i,a,l,c=n(672652);n(42279);var s=n(684404),u=n(214877),d=n(207012),f=n(751279),p=n(91402),y=n(673500),h=n(140017),b=n(339001),m=n(757640),v=n(819267),g=void 0!==r?r:r=n(308322),_=void 0!==o?o:o=n(410661),j=void 0!==i?i:i=n(340723);function S(e){var t=e.pinKey,n=(0,h.ZP)(),r=(0,d.Z)(g,t),o="GraphQL"===(0,p.g)(t).kind,i=(0,y.Z)({strategy:o?"GRAPHQL":"LEGACY",query:j,variables:{pinId:r.entityId},options:{fetchPolicy:"network-only"},transformGraphQL:function(e){var t;return(null===(t=e.v3GetPinQuery)||void 0===t?void 0:t.__typename)==="V3GetPin"?e.v3GetPinQuery.data:null},useGetLegacyResource:function(e){var t=e.pinId;return(0,m.Z)({name:"ApiResource",options:{url:"/v3/pins/".concat(t,"/"),field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0})}}),a=(0,d.Z)(_,i);return a&&a.pinnedToBoard&&"quick_creates"!==a.pinnedToBoard.layout?(0,v.jsxs)(s.xu,{children:[(0,v.jsx)(s.xu,{color:"errorBase","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:(0,v.jsx)(s.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:(0,b.nk)(n._('Psst! You already saved this Pin to {{ board_name }} ', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:(a.pinnedToBoard||{}).name}).join(" ")})}),(0,v.jsx)(s.xu,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,v.jsx)(s.JO,{accessibilityLabel:"",color:"error",icon:"heart",size:26})})]}):null}var P=n(540554),O=["pinKey","shuffleAssetKey"];function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}var B=void 0!==a?a:a=n(109500),D=void 0!==l?l:l=n(505406),z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=E(i);if(t){var r=E(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return k(e)}(this,e)});function i(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var e,t,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return T(k(t=o.call.apply(o,[this].concat(r))),"state",{flyoutCursorIndex:-1,description:(null===(e=t.props.pin)||void 0===e?void 0:e.description)&&t.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),T(k(t),"updateDescription",function(e){t.props.updateDescription&&t.props.updateDescription(e)}),T(k(t),"handleDescriptionBlur",function(e){var n=e.target.value.trim(),r=t.state.isHashtagFlyoutOpen;t.updateDescription(n),t.setState({description:n,editing:r})}),T(k(t),"handleDescriptionEdit",function(){t.setState({editing:!0})}),T(k(t),"handleHashtagAddition",function(e){var n=t.props.pin;t.props.logContextEvent({event_type:101,component:208,element:10249,object_id_str:null==n?void 0:n.entityId,aux_data:{hashtags:e}});var r=t.state.flyoutCursorIndex,o=Number(r+t.state.hashtagQuery.length),i=t.state.description.slice(0,r)+e+" "+t.state.description.slice(o);t.updateDescription(i),t.setState({description:i,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),t}return n=[{key:"render",value:function(){var e,t,n,r,o=this.props,i=o.color,a=o.isFirstPin,l=o.pin,c=o.pinImageRef,u=o.shuffleAsset,d=this.state,p=d.editing,y=d.flyoutOpened,h=d.hashtagQuery,b=d.isHashtagFlyoutOpen,m=null!==(e=null==u?void 0:u.cutoutImages)&&void 0!==e?e:null==l?void 0:l.imageSpec_236x,g=(null==m?void 0:m.url)||(null==l?void 0:l.imageBase64)||(null===(t=this.props.urlPinInfo)||void 0===t?void 0:t.imageUrl),_=this.state.description||(null===(n=this.props.urlPinInfo)||void 0===n?void 0:n.description)||"",j=(null==l?void 0:l.link)||(null===(r=this.props.urlPinInfo)||void 0===r?void 0:r.link);return(0,v.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:y&&p?{transform:"translateY(-75px)"}:{}},display:"flex",justifyContent:"center",position:"relative",width:a?"50%":"",children:[(0,v.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(null==l?void 0:l.entityId)&&!u&&(0,v.jsx)(S,{pinKey:l}),(0,v.jsx)(s.xu,{paddingY:a?9:0,width:240,children:(0,v.jsx)(s.xu,{ref:c,maxHeight:y&&p?220:335,overflow:"hidden",rounding:4,children:g?(0,v.jsx)(s.Ee,{alt:_,naturalHeight:(null==m?void 0:m.height)||1,naturalWidth:(null==m?void 0:m.width)||1,src:g}):!!j&&(0,v.jsx)(f.Z,{color:i||"",description:_,url:j})})})]}),this.anchor&&b?(0,v.jsx)(P.Z,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,query:h}):null]})}}],C(i.prototype,n),r&&C(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(c.Component);function Z(e){var t=e.pinKey,n=e.shuffleAssetKey,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,O),o=(0,u.v)().logContextEvent,i=(0,d.Z)(B,t),a=(0,d.Z)(D,n);return(0,v.jsx)(z,I(I({},r),{},{logContextEvent:o,pin:i,shuffleAsset:a}))}},894711:function(e,t,n){n.d(t,{K:function(){return X}});var r,o,i=n(672652),a=n(780277);n(42279);var l=n(328038),c=n(684404),s=n(216167),u=n(798580),d=n(214877),f=n(622888),p=n(25919),y=n(190971),h=n(454514),b=n(207012),m=n(901855),v=n(140017),g=n(339001),_=n(456299),j=n(227258),S=n(13848),P=n(498301),O=n(149722),x=n(164212),w=n(692440),I=n(180338),C=n(821419),A=n(409403),k=n(386129);n(481177);var E=n(873955),T=n(819267),R=function(e,t,n){var r;return n?(0,E.Z)(e._('Saved to {{sectionName}} in {{boardName}}', 'Toast for successfully saving to a section within a board', 'Toast for successfully saving to a section within a board'),{sectionName:null!==(r=n.title)&&void 0!==r?r:"",boardName:null!=t?t:""}):(0,T.jsx)(c.xv,{children:(0,g.nk)(e._('Saved to {{ boardName }}', 'Libs.PinToBoard.NewBoardToast', 'boardName:Name of the new board created to add the saved pin'),{boardName:(0,T.jsx)(c.xv,{weight:"bold",children:t})})})},B=n(691010),D=["pinKey","shuffleAssetKey"];function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){H(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,n){return(t=U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==z(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===z(t)?t:String(t)}var W=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,Q=void 0!==r?r:r=n(450634),q=void 0!==o?o:o=n(882455),G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=K(i);if(t){var r=K(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return M(e)}(this,e)});function i(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var e,t,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return H(M(t=o.call.apply(o,[this].concat(r))),"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:t.getModalTitle(t.props.showCreate,!!t.props.boardWithSection),pinDescription:t.props.pin&&t.props.pin.description||(null===(e=t.props.urlPinInfo)||void 0===e?void 0:e.description)||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),H(M(t),"unmounted",!1),H(M(t),"setModalTitle",function(e){return t.safeSetState({modalTitle:e})}),H(M(t),"updateDescription",function(e){t.safeSetState({pinDescription:e})}),H(M(t),"close",function(){var e=t.props.onClose;e&&e(),t.props.logContextEvent({event_type:2502,component:5,element:610})}),H(M(t),"safeSetState",function(e,n){t.unmounted?n&&n():t.setState(e,n)}),H(M(t),"getPinResource",function(e,n,r){var o,i,a,l,c,d,f,p=t.props,y=p.color,h=p.location,b=p.pin,m=p.method,v=p.guid,g=p.additionalCreateFields,j=p.advertiser_id,S=p.previousHistory,O=p.urlPinInfo,x=p.shuffleAsset;null!=b&&b.entityId&&(c=(0,u.Z)({boardUrl:null===(d=b.board)||void 0===d?void 0:d.url,location:h,pinId:b.entityId,pinnerUserName:null===(f=b.pinner)||void 0===f?void 0:f.username,previousHistory:S,storyPinDataId:b.storyPinDataId,trackingParams:b.trackingParams,trackingParamsMap:(0,_.Z)(b)})||"".concat(b.trackingParams||"","~0"));var w=null!=b&&b.entityId?"RepinResource":"PinResource",I=(null==b?void 0:b.imageUrl)||(null==O?void 0:O.imageUrl),C=(null==b?void 0:b.link)||(null==O?void 0:O.link),A=!(null!=b&&b.entityId)&&I?(0,P.Z)(I,C):(null==b?void 0:null===(o=b.imageSpec_orig)||void 0===o?void 0:o.url)||"",k=L(L(L({},g),{},{board_id:n||"",color:y||"",clientTrackingParams:c,description:t.state.pinDescription,guid:v||"",link:C,image_base64:null!==(i=null==b?void 0:b.imageBase64)&&void 0!==i?i:void 0,image_url:A,is_buyable_pin:!1,is_removable:null!==(a=null==b?void 0:b.promotedIsRemovable)&&void 0!==a?a:void 0,media_upload_id:null!==(l=null==b?void 0:b.mediaUploadId)&&void 0!==l?l:void 0,method:m||"",pin_id:(null==b?void 0:b.entityId)||"",section:r,title:(null==b?void 0:b.title)||""},j?{advertiser_id:j}:Object.freeze({})),x?{shuffle_asset:x.entityId}:{});if(!e){var E=t.state.sharing,T=E.facebook,R=E.twitter;k.share_facebook=T,k.share_twitter=R}return s.Z.create(w,k)}),H(M(t),"triggerPubSubs",function(e){t.props.onPinCreate&&t.props.onPinCreate({boardId:e.board.id,pinId:e.id})}),H(M(t),"makeCancelablePromise",function(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)}),e.catch(function(e){return t?r({isCanceled:!0}):r(e)})}),cancel:function(){t=!0}}}),H(M(t),"handleLogToastClick",function(){t.props.logContextEvent({event_type:101,component:20,view_type:52})}),H(M(t),"showSuggestedBoardToast",function(e){var n=t.props,r=n.toastManagerContext;if(n.shouldShowToast&&e){var o=e.name,i=e.url,a=e.image_thumbnail_url;r.showOneToast(function(e){var n=e.hideToast;return(0,T.jsx)(h.ZP,{duration:B.A,href:i,imageUrl:a,onClick:t.handleLogToastClick,onHide:n,text:(0,T.jsx)(c.xv,{children:(0,g.nk)(t.props.i18n._('You might also like {{ suggestion }}', 'PinSaveRequest.Toast.Suggestion', 'Post repin suggested board. suggestion: suggested board name'),{suggestion:(0,T.jsx)(c.xv,{weight:"bold",children:o})})})})})}}),H(M(t),"showBoardSavedToast",function(e,n){var r=t.props,o=r.toastManagerContext,i=r.i18n;o.showToast(function(r){var o,a,l,c=r.hideToast;return(0,T.jsx)(h.ZP,{duration:B.A,href:n?"".concat(null!==(o=e.url)&&void 0!==o?o:"").concat(null!==(a=n.slug)&&void 0!==a?a:""):e.url,imageUrl:null!==(l=e.image_cover_url)&&void 0!==l?l:"",onClick:t.handleLogToastClick,onHide:c,text:R(i,e.name,n)})})}),H(M(t),"dismissModal",function(){var e=t.state,n=e.resolve,r=e.newPin;n&&n(r)}),H(M(t),"fetchBoardRecommendation",function(e){return s.Z.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(function(e){return Promise.resolve(e.resource_response.error?null:e.resource_response.data[0])})}),H(M(t),"handleBoardSaveSuccess",function(e,n,r,o){var i,a,l,c=t.props,s=c.action,u=c.saveToBoard,d=c.dispatch,f=c.pin,y=c.setCompletionPromise,h=c.shouldShowToast,b=c.showRepinAnimation,m=c.viewerUserId,v=c.urlPinInfo;d((0,p.fO)());var g=e.resource_response.data,_=t.makeCancelablePromise(new Promise(function(e){t.triggerPubSubs(g);var i,a=t.state.pinDescription.match(W)||[];a.length>0&&t.props.logContextEvent({event_type:2,element:10273,object_id_str:null===(i=t.props.pin)||void 0===i?void 0:i.entityId,aux_data:{hashtags:JSON.stringify(a)}}),"repin"===s&&t.fetchBoardRecommendation(g).then(function(e){t.showSuggestedBoardToast(e)}),o?(h&&t.showBoardSavedToast(n,r),t.safeSetState({displaySuccessAnimation:!0,modalTitle:t.props.i18n._('Board created', 'Modal title after creating a new board', 'Modal title after creating a new board'),newPin:g,resolve:e})):e(g)}));!o&&null!=f&&f.entityId&&b(f.entityId),y(_),u(n),d((0,C.Br)({boardId:n.id,sectionId:r&&r.id,increment:1})),m&&(d((0,k.JS)({userId:m,increment:1})),d((0,p.fO)())),(r||!n.image_cover_url)&&(n.image_cover_url=(null==f?void 0:f.imageUrl)||(null==v?void 0:v.imageUrl)||(null==f?void 0:null===(i=f.imageSpec_236x)||void 0===i?void 0:i.url)||"",d((0,C.yT)(n))),r&&d((0,j.U)("BoardSectionResource",{options:{field_set_key:"board_page",section_id:r.id}})),null!=f&&f.entityId&&d((0,A.Ur)({id:f.entityId,nodeId:f.__id,boardId:n.id,title:null!==(a=n.name)&&void 0!==a?a:"",url:null!==(l=n.url)&&void 0!==l?l:"",localPinId:g.id}))}),H(M(t),"handleSaveToBoard",function(e,n,r){var o=t.props,i=o.onToggleModal,a=o.shouldShowToast,l=o.mountAfterActionPlacement;a&&!r&&(t.close(),t.showBoardSavedToast(e,n));var c="secret"===(e.privacy||""),s={board:n?n.id:e.id,state:B.S.LOADING};t.safeSetState({boardSavedTo:s},function(){t.getPinResource(c,e.id,(n||{}).id).callCreate({showError:!1}).then(function(o){var a,c;l("Save",{pin_id:null===(a=t.props.pin)||void 0===a?void 0:a.entityId,is_promoted:null===(c=t.props.pin)||void 0===c?void 0:c.isPromoted}),t.safeSetState({boardSavedTo:Object.assign(s,{state:B.S.SUCCESS})},function(){return t.handleBoardSaveSuccess(o,e,n,r)}),i&&!r&&i(!1)}).catch(function(e){t.unmounted||t.safeSetState({boardSavedTo:null}),f.Z.showError(e.message_detail||e.message);var n=t.makeCancelablePromise(Promise.reject(e));t.props.setCompletionPromise(n),i&&i(!1)})})}),H(M(t),"handleNewBoardAnimationCompletion",function(){var e=t.props,n=e.pin,r=e.showRepinAnimation;null!=n&&n.entityId&&r(n.entityId)}),t}return n=[{key:"getModalTitle",value:function(e,t){return e?t?this.props.i18n._('Create section', 'modal title for create section pane', 'modal title for create section pane'):this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board'):t?this.props.i18n._('Choose section', 'modal title for choose section', 'modal title for choose section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board')}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.boardWithSection,r=t.showCreate,o=t.pin,i=t.urlPinInfo,a=t.description,l={};(o!==e.pin||i!==e.urlPinInfo||a!==e.description)&&(l.pinDescription=(null==o?void 0:o.description)||(null==i?void 0:i.description)||a||""),(r!==e.showCreate||n!==e.boardWithSection)&&(l.modalTitle=this.getModalTitle(r,!!n)),Object.keys(l).length>0&&this.safeSetState(l)}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var e=this.close,t=this.dismissModal,n=this.handleNewBoardAnimationCompletion,r=this.handleSaveToBoard,o=this.setModalTitle,i=this.updateDescription,a=this.state,l=a.boardSavedTo,c=a.displaySuccessAnimation,s=a.modalTitle,u=a.newPin,d=this.props.color;return this.props.children({boardSavedTo:l,color:d,dismissModal:t,displaySuccessAnimation:c,handleAbort:e,handleNewBoardAnimationCompletion:n,handleSaveToBoard:r,modalTitle:s,newPin:u,setModalTitle:o,updateDescription:i})}}],N(i.prototype,n),r&&N(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(i.Component);function X(e){var t,n=e.pinKey,r=e.shuffleAssetKey,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,D),i=(0,w.N)().saveToBoard,c=(0,d.v)().logContextEvent,s=null===(t=(0,I.W)())||void 0===t?void 0:t.onPinCreate,u=(0,v.ZP)(),f=(0,l.TH)(),p=(0,O.Z)(),h=(0,S.F9)(),g=(0,a.useDispatch)(),_=(0,x.J)().updateHeaderState,j=(0,a.useSelector)(function(e){var t=e.advertiser;return p.isAuth&&t&&t.owner_user_id!==p.id?t.id:void 0}),P=(0,m.Hv)().previous,C=(0,y.c)(),A=(0,b.Z)(Q,n),k=(0,b.Z)(q,r);return(0,T.jsx)(G,L(L({},o),{},{advertiser_id:j,dispatch:g,i18n:u,location:f,logContextEvent:c,mountAfterActionPlacement:C,onPinCreate:s,pin:A,previousHistory:P,saveToBoard:i,showRepinAnimation:function(e){return _({type:"showRepinAnimation",payload:e})},shuffleAsset:k,toastManagerContext:h,viewerUserId:p.isAuth?p.id:void 0}))}},898924:function(e,t,n){n.d(t,{ZP:function(){return eJ}});var r,o,i,a,l=n(672652);n(42279);var c=n(684404),s=n(930837),u=n(207012),d=n(140017),f=n(149722),p=n(373395),y=n(88988),h=n(780277),b=n(587703),m=n(5859),v=n(402287),g=n(819267);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=e.board,n=e.completeCreateSectionAction,r=e.height,o=e.onClose,i=e.pinImport,a=e.url,u=e.width,f=(0,d.ZP)(),p=(0,m.B)().isRTL,y=(0,b.Z)(),j=(0,h.useDispatch)(),S=_((0,l.useState)(""),2),P=S[0],O=S[1],x=_((0,l.useState)(!1),2),w=x[0],I=x[1],C=_((0,l.useState)(null),2),A=C[0],k=C[1];return(0,g.jsx)(s.ZP,{accessibilityModalLabel:f._('Repin modal', 'save.pinToBoard.modal.label', 'Accessibility label on modal'),footer:(0,g.jsx)(c.kC,{children:(0,g.jsx)(c.xu,{marginStart:"auto",children:(0,g.jsx)(c.zx,{color:"red",disabled:w||!P.trim()||!!A,fullWidth:!0,onClick:function(){t&&(I(!0),j((0,v.vB)({boardId:t.id,name:P.trim(),pinImport:i},f,void 0,y)).then(function(e){n(t,e,!1)}).catch(function(e){k(e.message_detail||e.message)}).finally(function(){I(!1)}))},size:"lg",text:f._('Add', 'sectionCreateModal.add.button', 'add a new section')})})}),heading:(0,g.jsx)(c.xu,{paddingY:8,children:(0,g.jsxs)(c.kC,{justifyContent:"center",children:[(0,g.jsx)(c.xu,{maxWidth:400,children:(0,g.jsx)(c.X6,{align:"center",size:"500",children:f._('Add section', 'sectionCreateModal.title', 'Title in the add section modal')})}),(0,g.jsx)(c.xu,{left:p,padding:8,position:"absolute",right:!p,top:!0,children:(0,g.jsx)(c.hU,{accessibilityLabel:f._('Close', 'sectionCreateModal.closeButton', 'close section create modal button'),icon:"cancel",iconColor:"darkGray",onClick:o,size:"md"})})]})}),onDismiss:o,size:"sm",children:(0,g.jsx)(c.xu,{padding:8,children:(0,g.jsxs)(c.kC,{children:[(0,g.jsx)(c.zd,{height:r,rounding:4,width:u,children:(0,g.jsx)(c.Ee,{alt:"",fit:"cover",naturalHeight:null!=r?r:1,naturalWidth:null!=u?u:1,src:a||""})}),(0,g.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{width:u?"calc(100% - ".concat(u,"px)"):"100%"}},marginStart:8,children:(0,g.jsx)(c.nv,{errorMessage:A,id:"sectionEditName",label:f._('Name', 'section.create.label', 'label text for section input'),onChange:function(e){O(e.value),k(null)},placeholder:f._('Like "Lighting"', 'sectionCreateModal.boardSection.name', 'Placeholder for board section name'),size:"lg",type:"text",value:P})})]})})})},P=n(214877),O=n(827625),x=n(757640),w=n(416049),I=n(554786),C=n(175597),A=n(673463),k=["pinKey"];function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){L(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}var F=void 0!==r?r:r=n(569483),M=void 0,K=function(e){var t=[],n=[];return e.forEach(function(e){var r;null!==(r=e.name)&&void 0!==r&&r.match(/^\d/)?n.push(e):t.push(e)}),[].concat(t,n)};function H(e,t,n,r){return Z(Z(Z(Z({},e?{pin_id:e}:Object.freeze({})),t?{username:t}:Object.freeze({})),n?{advertiser_id:n,filter:"protected"}:Object.freeze({})),{},{field_set_key:"board_picker",limit:M,shortlist_suggestions:2,isDesktop:r})}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=D(o);if(t){var r=D(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return B(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return L(B(e=r.call.apply(r,[this].concat(n))),"getSections",function(t){var n=e.props.boardResource.data;if(!n)return[];var r=n.all_boards,o=n.boards_shortlist,i=K(r);return i.length<=3?[{items:i}]:t.length>=w.Z?[{items:(0,A.j)(i,t)}]:[o.length?{items:o,title:e.props.i18n._('Top choices', ' - ', ' -- ')}:{items:[]},{items:i,title:e.props.i18n._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')}]}),e}return T(o.prototype,[{key:"render",value:function(){var e=this.props,t=e.boardResource,n=t.data,r=t.error,o=t.isLoaded,i=e.boardSavedTo,a=e.isSelectMode,l=e.onBoardCreate,c=e.onBoardSelected,s=e.pin,u=o&&!!n&&n.all_boards.length<=3;return(0,g.jsx)(C.Z,{boardSavedTo:i,getSections:this.getSections,hasLoadError:!!r,hasLowBoardCount:u,isLoaded:o,isSelectMode:a,onCreate:l,onSelected:c,pinId:null==s?void 0:s.entityId})}}]),n&&T(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(l.Component);function W(e){var t=e.pinKey,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,k),r=(0,d.ZP)(),o=(0,f.Z)(),i=(0,I.HG)(),a=(0,u.Z)(F,t),l=(0,h.useSelector)(function(e){var t=e.advertiser;if(o.isAuth&&t&&t.owner_user_id!==o.id)return t.id}),c=(0,h.useSelector)(function(e){var t=e.advertiser;if(o.isAuth&&t&&t.owner_user_id!==o.id)return t.owner_user_id}),s=(0,x.Z)({name:"BoardPickerBoardsResource",options:H(null==a?void 0:a.entityId,c,l,i)});return(0,g.jsx)(U,Z(Z({},n),{},{boardResource:s,i18n:r,pin:a}))}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){J(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ee(r.key),r)}}function Y(e,t){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,n){return(t=ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e){var t=function(e,t){if("object"!==Q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Q(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Q(t)?t:String(t)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=$(i);if(t){var r=$(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return V(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return J(V(e=o.call.apply(o,[this].concat(n))),"getSections",function(t){var n=e.props,r=n.board,o=n.i18n,i=n.sectionsResource.data,a=o._('Board', 'PinSaveButton.RepinPicker.SectionListBoardTitle', 'board title on section picker'),l=o._('Section', 'PinSaveButton.BoardFlyout.SectionListSectionTitle', 'section title on section picker');return t.length>=w.Z?[{items:(0,A.j)([r],t),customProps:{inSectionSelection:!0}},{items:(0,A.j)(null!=i?i:[],t,"title")}]:[{items:[r],customProps:{inSectionSelection:!0},title:a},{items:null!=i?i:[],title:l}]}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.sectionsResource,n=t.error,r=t.isLoaded,o=e.boardSavedTo,i=e.isSelectMode,a=e.onSectionCreate,l=e.onSectionSelected,c=e.pinId;return(0,g.jsx)(C.Z,{boardSavedTo:o,createButtonLabel:this.props.i18n._('Add section', 'Button for creating a board section', 'Button for creating a board section'),getSections:this.getSections,hasLoadError:!!n,isLoaded:r,isSelectMode:i,onCreate:a,onSelected:l,pinId:c})}}],X(i.prototype,n),r&&X(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(l.Component);function en(e){var t=(0,d.ZP)(),n=(0,x.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}});return(0,g.jsx)(et,G(G({},e),{},{i18n:t,sectionsResource:n}))}var er=n(481177),eo=n(137023),ei=n(675266),ea=n(205841),el=n(873955);function ec(e){var t=(0,d.ZP)(),n=e.body,r=e.img,o=e.onClick,i=e.selected,a=e.title,l=e.username,s=e.valid;return(0,g.jsx)(c.xu,{marginBottom:4,children:(0,g.jsx)(c.iP,{onTap:o,children:(0,g.jsxs)(c.kC,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[r,(0,g.jsxs)(c.xu,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,g.jsx)(c.xu,{marginBottom:1,children:(0,g.jsx)(c.xv,{lineClamp:1,weight:"bold",children:a})}),(0,g.jsx)(c.xv,{lineClamp:1,size:"100",children:l||n})]}),(0,g.jsx)(c.xu,{marginStart:2,children:l?i?(0,g.jsx)(c.JO,{accessibilityLabel:t._('Confirmation an invite will be sent', 'Alt tags on a check box on the board create flow for board invites', 'Alt tags on a check box on the board create flow for board invites'),color:"error",icon:"check-circle",size:32}):(0,g.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,g.jsx)(c.zx,{color:"gray",disabled:!!i||!s,size:"sm",text:i?t._('Sent', 'Sent a board collaborator invite', 'Sent a board collaborator invite'):t._('Invite', 'Add board collaborator invite', 'Add board collaborator invite')})})]})})})}var es=n(823813);function eu(e){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(t){em(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ev(r.key),r)}}function ey(e,t){return(ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eh(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eb(e){return(eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function em(e,t,n){return(t=ev(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ev(e){var t=function(e,t){if("object"!==eu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eu(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eu(t)?t:String(t)}function eg(e,t,n){var r=e.id;return t===n.findIndex(function(e){return e.id===r})}var e_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ey(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eb(i);if(t){var r=eb(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===eu(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eh(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return em(eh(e=o.call.apply(o,[this].concat(n))),"state",{selectedCollaborators:e.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),em(eh(e),"isIdSelected",{}),em(eh(e),"handleTextFieldChange",function(t){var n=t.value;e.setState({value:n})}),em(eh(e),"handleCollaboratorClick",function(t){var n=t.id,r=t.type;e.isIdSelected[n]=!e.isIdSelected[n];var o=e.props,i=o.inviteUsers,a=o.inviteEmails,l=e.state.selectedCollaborators.concat([t]);e.props.onSelectedCollaboratorsChange({id:n,resource:"email"===r?a:i}),e.setState({selectedCollaborators:l})}),em(eh(e),"handleTypeaheadSuggestionsChange",function(t){e.setState({typeaheadSuggestions:t})}),e}return n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.inviteUsers,r=t.inviteEmails;this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(function(t){var o=t.id,i=t.type;return e.isIdSelected[o]=!e.isIdSelected[o],e.props.onSelectedCollaboratorsChange({id:o,resource:"email"===i?r:n}),null})}},{key:"render",value:function(){var e=this,t=this.state.value,n=this.props.shareSuggestionsResource.data||[],r=(""===t?this.state.selectedCollaborators.concat(n).filter(eg):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:t,valid:(0,ei.Z)(t)}).concat(n).filter(eg)).map(function(t){return function(e,t,n,r){if("user_share_suggestion"===e.type||"user"===e.type){var o=(0,g.jsx)(ea.qE,{accessibilityLabel:"",name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,g.jsx)(ec,{img:o,onClick:function(){return n(e)},selected:t,title:e.full_name,username:e.username})}if("email"===e.type){var i,a,l=e.id,s=e.valid,u=(0,g.jsx)(c.xu,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,g.jsx)(c.JO,{accessibilityLabel:r._('Email icon', 'Email icon on board create modal', 'Email icon on board create modal'),color:"default",icon:"envelope",size:20})}),d=(0,el.Z)(r._('Email {{ email }}', ' - ', ' -- '),{email:l});return t?(i=r._('Done!', 'Text that lets the user know we sent the board invite email', 'Text that lets the user know we sent the board invite email'),a=function(){}):(i=s?r._('Click to send!', 'Text that lets the user know they can successfully send a board invite email', 'Text that lets the user know they can successfully send a board invite email'):r._('Keep typing!', 'Text that lets a user know the email they are typing is not valid yet', 'Text that lets a user know the email they are typing is not valid yet'),a=function(){return s?n(e):void 0}),(0,g.jsx)(ec,{body:i,img:u,onClick:a,selected:t,title:d,valid:s})}}(t,e.isIdSelected[t.id],e.handleCollaboratorClick,e.props.i18n)}).map(function(e,t){return(0,g.jsx)("li",{children:e},t)});return(0,g.jsxs)(c.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,g.jsx)(c.xu,{paddingX:3,paddingY:2,children:(0,g.jsx)(c.xv,{size:"100",children:this.props.i18n._('Add collaborators (optional)', 'Optional field to add collaborators to a board on board create', 'Optional field to add collaborators to a board on board create')})}),(0,g.jsx)(c.xu,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,g.jsx)(c.xu,{flex:"grow",children:(0,g.jsx)(eo.Z,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:t,children:(0,g.jsx)(c.Um,{accessibilityLabel:this.props.i18n._('Search for collaborators by name or email', ' - ', ' -- '),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._('Search by name or email', ' - ', ' -- '),size:"lg",value:t})})})}),(0,g.jsx)(c.xu,{overflow:"scrollY",paddingX:3,children:(0,g.jsx)("ul",{children:r})})]})}}],ep(i.prototype,n),r&&ep(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(l.Component);function ej(e){var t=(0,d.ZP)(),n=(0,x.Z)({name:"ShareSuggestionsResource",noCache:!0}),r=(0,es.zC)(),o=(0,es.DK)();return(0,g.jsx)(e_,ef(ef({},e),{},{i18n:t,inviteEmails:r,inviteUsers:o,shareSuggestionsResource:n}))}var eS=n(317985),eP=n(316796);function eO(e){var t=e.onCancel,n=e.onCreate,r=e.onInvite,o=e.prefilledName,i=e.preselectedCollaborators,a=e.showTitle,s=(0,d.ZP)(),u=(0,m.B)().isRTL,f=(0,eP.Z)({onCreate:n,prefilledName:o}),p=f.handleCreate,y=f.handleChangeName,h=f.handleChangePrivacy,b=f.isAdAccountOwner,v=f.state,_=v.createBoardError,j=v.inputName,S=v.nameValidatorErrors,P=v.privacy,O=v.saving,x=0===S.length,w=P===er.Z.BoardPrivacy.SECRET;return(0,g.jsx)(c.xu,{color:"default",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,g.jsx)("form",{onSubmit:function(e){e.preventDefault(),p()},style:{height:"100%"},children:(0,g.jsxs)(c.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[a&&(0,g.jsx)(c.xu,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,g.jsx)(c.X6,{size:"400",children:s._('Create board', ' - ', ' -- ')})}),(0,g.jsxs)(c.xu,{padding:3,children:[(0,g.jsx)(c.xu,{marginBottom:2,children:(0,g.jsx)(c.__,{htmlFor:"boardEditName",children:(0,g.jsx)(c.xv,{size:"100",children:s._('Name', ' - ', ' -- ')})})}),(0,g.jsx)(c.xu,{children:(0,g.jsx)(c.nv,{errorMessage:S.join(", "),id:"boardEditName",name:"boardName",onChange:function(e){return y(e.value)},placeholder:s._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:j})})]}),b&&(0,g.jsxs)(l.Fragment,{children:[(0,g.jsxs)(c.xu,{padding:3,children:[(0,g.jsx)(c.xu,{marginBottom:2,children:(0,g.jsx)(c.__,{htmlFor:"secret",children:(0,g.jsx)(c.xv,{size:"100",children:s._('Secret', 'secret board', 'secret board')})})}),(0,g.jsx)(c.xu,{children:(0,g.jsx)(c.rs,{id:"secret",onChange:h,switched:w})})]}),(0,g.jsx)(c.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start",overflow:"hidden",children:(0,g.jsx)(c.xu,{width:"100%",children:(0,g.jsx)(ej,{onSelectedCollaboratorsChange:r,preselectedCollaborators:i})})})]}),!b&&(0,g.jsx)(l.Fragment,{children:(0,g.jsxs)(c.xu,{padding:3,children:[(0,g.jsx)(c.xu,{marginBottom:2,children:(0,g.jsx)(c.__,{htmlFor:"protected",children:(0,g.jsx)(c.xv,{size:"100",children:s._('Protected board (not listed on user\'s profile)', 'protected board', 'protected board')})})}),(0,g.jsx)(c.xu,{children:(0,g.jsx)(c.rs,{disabled:!0,id:"protected",onChange:function(){},switched:!0})})]})}),(0,g.jsxs)(c.xu,{borderStyle:"shadow",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},display:"flex",justifyContent:"between",left:u,paddingX:4,paddingY:2,position:"absolute",right:!u,width:720,children:[(0,g.jsx)(c.kC,{children:(0,g.jsx)(c.zx,{onClick:t,text:s._('Cancel', 'cancel board create', 'cancel board create')})}),(0,g.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"end",children:[!!_&&(0,g.jsx)(c.xu,{paddingX:2,children:(0,g.jsx)(c.xv,{align:"center",color:"error",size:"200",weight:"bold",children:_})}),(0,g.jsx)(eS.Z,{disabled:!j.trim()||!x||!!_||O,submitting:O,text:s._('Create', 'create a new board', 'create a new board')})]})]})]})})})}var ex=n(916964),ew=["pinKey"];function eI(e){return(eI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(t){eB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ek(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eD(r.key),r)}}function eE(e,t){return(eE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eT(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eR(e){return(eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eB(e,t,n){return(t=eD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eD(e){var t=function(e,t){if("object"!==eI(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eI(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eI(t)?t:String(t)}var ez=void 0!==o?o:o=n(580986),eZ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eE(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eR(i);if(t){var r=eR(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===eI(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eT(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return eB(eT(e=o.call.apply(o,[this].concat(n))),"state",{inviteQueue:{},newName:"",selectedSectionBoard:e.props.boardWithSection||null,showCreate:e.props.showCreate||!1}),eB(eT(e),"close",function(){var t=e.state,n=t.selectedSectionBoard,r=t.showCreate,o=e.props.onClose;r&&n?e.setState({showCreate:!1},e.manageModalTitle):n?e.setState({selectedSectionBoard:null},e.manageModalTitle):o()}),eB(eT(e),"sendInvites",function(t){var n=e.state.inviteQueue;Object.keys(n).forEach(function(e){var r;n[e].resource(null!==(r=t.id)&&void 0!==r?r:"",[e])})}),eB(eT(e),"handleInvite",function(t){var n=e.state.inviteQueue;if(n[t.id]){var r=eA({},n);delete r[t.id],e.setState({inviteQueue:r})}else{var o=eA(eA({},n),{},eB({},t.id,t));e.setState({inviteQueue:o})}}),eB(eT(e),"handleBoardCreate",function(t){var n=e.props.onBoardCreated;e.handleBoardSave(t,!0),n&&n(t)}),eB(eT(e),"handleBoardSave",function(t,n){var r=e.state.selectedSectionBoard,o=e.props,i=o.onBoardSave,a=o.invalidatePinBetterSaveResource,l=o.invalidateResource,c="board_section"===t.type;if(l(),a(),r&&("boardsection"===t.type||c))return i(r,t,n);var s=t.section_count,u=void 0===s?0:s;!r&&"number"==typeof u&&u>0?e.setState({selectedSectionBoard:t},e.manageModalTitle):(e.sendInvites(t),i(t,void 0,n))}),eB(eT(e),"handleCreate",function(t){return function(n){n=n||"",e.setState({newName:n,showCreate:!0},e.manageModalTitle),e.props.logContextEvent({event_type:101,component:t?13105:13025,element:t?10306:249})}}),eB(eT(e),"manageModalTitle",function(){var t=e.props.setModalTitle,n=e.state,r=n.selectedSectionBoard,o=n.showCreate;t&&t(o&&r?e.props.i18n._('Add section', 'Repin title for making a board section', 'Repin title for making a board section'):o&&!r?e.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board'):r&&!o?e.props.i18n._('Choose section', 'Repin title for choosing a board section', 'Repin title for choosing a board section'):e.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board'))}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.boardSavedTo,n=e.isRepin,r=e.isSelectMode,o=e.pin,i=e.preselectedCollaborators,a=e.setModalTitle,l=e.suggestedBoardTitle,s=this.state,u=s.newName,d=s.selectedSectionBoard,f=s.showCreate,p=!!d,y=!a;return(0,g.jsxs)(c.xu,{display:"flex",position:"relative",width:"100%",children:[!f&&(0,g.jsx)(c.xu,{direction:"column",display:"flex",marginTop:4,width:"100%",children:d?(0,g.jsx)(en,{board:d,boardSavedTo:t,isSelectMode:r,onSectionCreate:this.handleCreate(p),onSectionSelected:this.handleBoardSave}):(0,g.jsx)(W,{boardSavedTo:t,isSelectMode:r,onBoardCreate:this.handleCreate(p),onBoardSelected:this.handleBoardSave,pinKey:o})}),f&&!d&&(0,g.jsx)(eO,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,prefilledName:u||l,preselectedCollaborators:i,showTitle:y}),f&&d&&(0,g.jsx)(ex.Z,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:u,isRepin:n,onClearModal:this.close,showTitle:y})]})}}],ek(i.prototype,n),r&&ek(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(l.Component);function eL(e){var t=e.pinKey,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ew),r=(0,P.v)().logContextEvent,o=(0,d.ZP)(),i=(0,u.Z)(ez,t),a=(0,h.useDispatch)();return(0,g.jsx)(eZ,eA(eA({},n),{},{i18n:o,invalidatePinBetterSaveResource:function(){a((0,O.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},invalidateResource:function(){a((0,O.jB)("BoardPickerBoardsResource",H(null==i?void 0:i.entityId)))},logContextEvent:r,pin:i}))}var eN=n(662058),eF=["pinKey","shuffleAssetKey"];function eM(e){return(eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(n),!0).forEach(function(t){eG(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eX(r.key),r)}}function eW(e,t){return(eW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eQ(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eq(e){return(eq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eG(e,t,n){return(t=eX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eX(e){var t=function(e,t){if("object"!==eM(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eM(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eM(t)?t:String(t)}var eY=void 0!==i?i:i=n(738258),eV=void 0!==a?a:a=n(945950),e$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eW(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eq(i);if(t){var r=eq(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===eM(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eQ(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return eG(eQ(e=o.call.apply(o,[this].concat(n))),"pinImageRef",(0,l.createRef)()),eG(eQ(e),"handleSavePinToBoard",function(t,n,r){(0,e.props.handleSaveToBoard)(t,n,r)}),eG(eQ(e),"close",function(){(0,e.props.handleAbort)()}),eG(eQ(e),"dismissModal",function(){var t=e.props.dismissModal;t&&t()}),e}return n=[{key:"render",value:function(){var e,t,n,r,o,i,a,u=this,d=this.props,f=d.boardSavedTo,h=d.boardWithSection,b=d.color,m=d.displaySuccessAnimation,v=d.handleNewBoardAnimationCompletion,_=d.isInModal,j=d.newPin,P=d.pin,O=d.preselectedCollaborators,x=d.onBoardCreated,w=d.sensitiveContentNotice,I=d.setModalTitle,C=d.showCreate,A=d.shouldRenderContent,k=d.suggestedBoardTitle,E=d.updateDescription,T=d.urlPinInfo,R=d.shuffleAsset,B=(null==T?void 0:T.description)||(null==T?void 0:T.link)||(null==T?void 0:T.imageUrl);if(!P&&!B||!A)return null;if(C&&h)return(0,g.jsx)(S,{board:h,completeCreateSectionAction:this.handleSavePinToBoard,height:null!==(e=null==P?void 0:null===(t=P.imageSpec_236x)||void 0===t?void 0:t.height)&&void 0!==e?e:0,onClose:this.close,url:null!==(n=null!==(r=null==P?void 0:null===(o=P.imageSpec_236x)||void 0===o?void 0:o.url)&&void 0!==r?r:null==T?void 0:T.imageUrl)&&void 0!==n?n:"",width:null!==(i=null==P?void 0:null===(a=P.imageSpec_236x)||void 0===a?void 0:a.width)&&void 0!==i?i:0});var D=null;j&&j.board&&(D=j.board.name);var z=w&&w.title||this.props.modalTitle,Z=w?(0,g.jsx)(p.Z,{inModal:!0,notices:[w]}):(0,g.jsx)(c.kC,{alignItems:"stretch",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%",children:(0,g.jsxs)(l.Fragment,{children:[(0,g.jsxs)(c.xu,{color:"default",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,g.jsx)(c.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:(0,g.jsx)(c.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,g.jsx)(eN.Z,{color:b,pinImageRef:this.pinImageRef,pinKey:P,shuffleAssetKey:R,updateDescription:E,urlPinInfo:T})})}),(0,g.jsx)(c.kC,{alignItems:"stretch",width:"60%",children:(0,g.jsx)(eL,{boardSavedTo:f,boardWithSection:h,isRepin:!0,onBoardCreated:x,onBoardSave:this.handleSavePinToBoard,onClose:this.close,pinKey:P,preselectedCollaborators:O,setModalTitle:_?I:void 0,showCreate:C,suggestedBoardTitle:k})})]}),m&&(0,g.jsx)(y.Z,{onDismiss:function(){v(),u.dismissModal()},pinImageRef:this.pinImageRef,pinKey:P,selectedBoardName:D,shuffleAssetKey:R})]})});return _?(0,g.jsx)(s.ZP,{accessibilityModalLabel:z||this.props.i18n._('Repin modal', 'save.pin-to-board.PinToBoard.PinToBoard', 'Accessibility label on modal'),heading:z,onDismiss:this.close,size:"md",children:Z}):Z}}],eU(i.prototype,n),r&&eU(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(l.PureComponent);eG(e$,"defaultProps",{pwtAuxData:{}});var eJ=function(e){var t=e.pinKey,n=e.shuffleAssetKey,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,eF),o=(0,d.ZP)(),i=(0,f.Z)(),a=(0,u.Z)(eY,t),l=(0,u.Z)(eV,n);return(0,g.jsx)(e$,eH(eH({},r),{},{i18n:o,pin:a,shuffleAsset:l,viewer:i}))}},691010:function(e,t,n){n.d(t,{A:function(){return r},S:function(){return o}});var r=4e3,o={LOADING:"loading",SUCCESS:"success"}},316796:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(672652),o=n(780277),i=n(481177),a=n(140017),l=n(339001),c=n(827625),s=n(149722),u=n(747602),d=n(281871),f=n(112544);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t,n=e.onCreate,p=e.prefilledName,y=(0,a.ZP)(),m=(0,o.useSelector)(function(e){return e.advertiser}),v=(0,o.useDispatch)(),g=(0,s.Z)(),_=!m||g.isAuth&&m.owner_user_id===g.id,j=m&&m.id,S=(0,f.Z)(),P=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)({createBoardError:null,inputName:p||"",nameValidatorErrors:[],privacy:_?i.Z.BoardPrivacy.PUBLIC:i.Z.BoardPrivacy.PROTECTED,saving:!1}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),O=P[0],x=P[1],w=function(){var e=O.inputName,t=O.privacy;x(h(h({},O),{},{saving:!0,createBoardError:null})),S({boardCreateOptions:h({name:e,privacy:t},!_&&j?{advertiser_id:j}:Object.freeze({}))}).then(function(e){x(h(h({},O),{},{saving:!1})),n(e)}).catch(function(e){var t=y._('Uh oh! Something went wrong.', ' - ', ' -- ');if("string"==typeof e)t=e;else if(e.message){var n=e.message,r=e.message_detail;t=r?"".concat(n," ").concat(r):n}x(h(h({},O),{},{saving:!1,createBoardError:t}))}),v((0,c.jB)("BoardsResource",(0,d.Z)(g.isAuth?g.username:"",t===i.Z.BoardPrivacy.SECRET)))};return{handleChangeName:function(e,t){x(h(h({},O),{},{inputName:e,nameValidatorErrors:(0,u.FU)([(0,u.aH)({message:y._('Don\'t forget to name your board!', ' - ', ' -- ')}),(0,u.Gy)({max:i.Z.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,l.nk)(y._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a user input is too long', 'Validation error when a user input is too long'),{maxLength:i.Z.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],e),createBoardError:null})),t&&w()},handleChangePrivacy:function(){x(h(h({},O),{},{privacy:O.privacy===i.Z.BoardPrivacy.SECRET?i.Z.BoardPrivacy.PUBLIC:i.Z.BoardPrivacy.SECRET}))},handleCreate:w,isAdAccountOwner:_,state:O}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/98538-3e04c69afca05bd8.js.map