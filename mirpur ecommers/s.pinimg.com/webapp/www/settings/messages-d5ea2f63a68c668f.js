(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3961],{892325:function(e,s,i){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/settings/messages"]=function(){return i(6981).Z}},296792:function(e,s,i){"use strict";var n=i(672652),t=i(684404),r=i(858128),o=i(819267),l=(0,n.forwardRef)(function(e,s){var i=e.heading,n=e.iconAccessibilityLabel,l=e.guideText,a=e.headingAccessibilityLevel,c=e.description,d=e.onTap,g=e.primarySettingsMenu,u=e.showBadge;return(0,o.jsx)(t.iP,{onTap:void 0===d?function(){}:d,tapStyle:"none",children:(0,o.jsx)(t.xu,{padding:g?2:0,children:(0,o.jsxs)(t.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,o.jsxs)(t.xu,{ref:s,width:"100%",children:[(0,o.jsxs)(t.kC,{children:[(0,o.jsx)(t.X6,{accessibilityLevel:void 0===a?3:a,size:"400",children:i}),u&&(0,o.jsx)(t.xu,{marginStart:2,children:(0,o.jsx)(t.kC,{direction:"column",height:"100%",justifyContent:"center",children:(0,o.jsx)(r.Z,{height:8,width:8})})}),l&&(0,o.jsx)(t.kC.Item,{flex:"grow",children:(0,o.jsx)(t.xu,{height:"100%",marginEnd:3,children:(0,o.jsx)(t.kC,{direction:"column",height:"100%",justifyContent:"center",children:(0,o.jsx)(t.xv,{align:"end",color:"subtle",children:l})})})})]}),c&&(0,o.jsx)(t.xu,{marginTop:2,children:(0,o.jsx)(t.xv,{color:"subtle",children:c})})]}),(0,o.jsx)(t.xu,{paddingY:1,children:(0,o.jsx)(t.JO,{accessibilityLabel:n,color:g?"subtle":"default",icon:"arrow-forward"})})]})})})});s.Z=l},858128:function(e,s,i){"use strict";var n=i(684404),t=i(819267);s.Z=function(e){var s=e.height,i=e.width,r=e.text,o=e.isAbsolute;return(0,t.jsx)(n.xu,{alignItems:"center",color:"primary",dangerouslySetInlineStyle:{__style:{padding:"0 3px 0 2px"}},display:"flex",height:s,justifyContent:"center",position:o?"absolute":void 0,rounding:"pill",width:i,children:(0,t.jsx)(n.xv,{align:"center",color:"inverse",size:"100",weight:"bold",children:(0,t.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{padding:"0 0 1px 1px"}},children:r||""})})})}},927218:function(e,s,i){"use strict";var n=i(684404),t=i(819267);s.Z=function(e){var s=e.heading,i=e.description,r=e.switchId,o=e.onChange,l=e.switched,a=e.headingAccessibilityLevel;return(0,t.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,t.jsx)(n.xu,{flex:"grow",marginEnd:4,children:(0,t.jsxs)(n.__,{htmlFor:r,children:[(0,t.jsx)(n.X6,{accessibilityLevel:a||3,size:"400",children:s}),i?(0,t.jsx)(n.xu,{flex:"grow",marginTop:2,children:(0,t.jsx)(n.xv,{color:"subtle",children:i})}):null]})}),(0,t.jsx)(n.rs,{id:r,onChange:o,switched:l})]})}},6981:function(e,s,i){"use strict";i.d(s,{Z:function(){return w}});var n=i(672652),t=i(780277),r=i(328038),o=i(684404),l=i(454514),a=i(140017),c=i(165706),d=i(179425),g=i(340523),u=i(757640),h=i(975048),_=i(296792),m=i(13848),f=i(554786),p=i(149722),x=i(19434),v=i(623281),b=i(880093),j=i(927218),y=i(819267);function A(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,t,r,o,l=[],a=!0,c=!1;try{if(r=(i=i.call(e)).next,0===s){if(Object(i)!==i)return;a=!1}else for(;!(a=(n=r.call(i)).done)&&(l.push(n.value),l.length!==s);a=!0);}catch(e){c=!0,t=e}finally{try{if(!a&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw t}}return l}}(e,s)||function(e,s){if(e){if("string"==typeof e)return P(e,s);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P(e,s)}}(e,s)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,s){(null==s||s>e.length)&&(s=e.length);for(var i=0,n=Array(s);i<s;i++)n[i]=e[i];return n}var w=function(){var e,s,i,P=(0,t.useDispatch)(),w=(0,r.k6)(),S=(0,a.ZP)(),z=(0,f.HG)(),I=(0,p.Z)(),L=(0,m.F9)().showToast,C=(0,g.F)().checkExperiment,E=(0,u.Z)({name:"UserSettingsResource",noCache:!0}),k=E.data,T=E.isLoaded,D=A((0,n.useState)(null===(s=I.partner)||void 0===s?void 0:s.enable_profile_message),2),M=D[0],O=D[1],Z=A((0,n.useState)([]),2),B=Z[0],H=Z[1],N=A((0,n.useState)([]),2),F=N[0],U=N[1],X=C("messaging_permissions_update").anyEnabled;(0,n.useEffect)(function(){var e,s=(null==k?void 0:k.messaging_permissions)||[];if(T&&s.length>0){var i=[],n=[];s.forEach(function(e){return e.eligible_levels.length>1?i.push(e):n.push(e)}),H(i),U(n)}O(null==k?void 0:null===(e=k.partner)||void 0===e?void 0:e.enable_profile_message)},[null==k?void 0:k.messaging_permissions,null==k?void 0:null===(i=k.partner)||void 0===i?void 0:i.enable_profile_message,T]);var G=function(e){var s=e.groupId,i=e.selectedLevelId,n=X?(0,b.Pp)({groupId:s,i18n:S}):(0,b.CE)({groupId:s,i18n:S}),t=(0,b.m8)({levelId:i,i18n:S});return n&&t&&(0,y.jsx)(o.xu,{"data-test-id":"".concat(n.route,"-message-setting"),marginBottom:6,children:(0,y.jsx)(_.Z,{description:t.label,heading:n.title,headingAccessibilityLevel:2,iconAccessibilityLabel:S._('Go to Edit title', 'profile.SocialPermissions.Messages.Icon', 'Edit Messages Icon on Social Permissions Page'),onTap:function(){n.route&&w.push("/settings/messages/".concat(n.route))}})},s)},R=function(e){var s=e.groupId,i=X?(0,b.Pp)({groupId:s,i18n:S}):(0,b.CE)({groupId:s,i18n:S});return i&&(0,y.jsxs)(o.xu,{"data-test-id":"".concat(i.route,"-message-setting"),marginBottom:6,children:[(0,y.jsx)(o.X6,{accessibilityLevel:2,size:"400",children:i.title}),(0,y.jsx)(o.xu,{marginTop:2,children:(0,y.jsx)(o.xv,{color:"subtle",children:i.nonEditableSubtitle||""})})]},s)},K=B.length>0||F.length>0,W=I.partner?!!M&&K:K;if(!I.isAuth)return(0,y.jsx)(r.l_,{to:b.NN});if(z)return(0,y.jsx)(r.l_,{to:b.ic});if(!T)return(0,y.jsx)(o.kC,{alignContent:"center",alignItems:"stretch",direction:"column",height:"100vh",justifyContent:"center",width:"100vw",children:(0,y.jsx)(o.$j,{accessibilityLabel:S._('Loading messaging permissions edit page', 'userSettingsPage.socialPermissions.MessagingPermissions.loading', 'Loading state for the edit messaging permissions page'),show:!0})});var Y=X?S._('You decide whether messages go to your inbox, requests, or if you don\u2019t receive them at all', 'userSettingsPage.SocialPermissions.MessagingPermissions.description', 'Description for the edit messaging permissions page'):S._('Choose who can send you messages', 'userSettingsPage.SocialPermissions.MessagingPermissions.description.deprecated', 'Deprecated description for the edit messaging permissions page');return(0,y.jsxs)(d.default,{hasFixedHeader:!0,children:[(0,y.jsx)(c.FixedHeader,{zIndexForGestaltBug:2,children:(0,y.jsx)(x.default,{heading:S._('Messages', 'userSettingsPage.socialPermissions.MessagingPermissions.title', 'Page for the edit messaging permissions settings'),legoSettingsEnabled:!0,previousUrl:"/settings/permissions"})}),(0,y.jsxs)(o.xu,{"data-test-id":"settings-messages",marginBottom:2,paddingX:2,children:[(0,y.jsx)(o.xu,{marginBottom:6,marginTop:1,children:(0,y.jsx)(o.xv,{align:"start",size:"300",children:Y})}),I.partner&&(0,y.jsx)(o.xu,{marginBottom:6,children:(0,y.jsx)(j.Z,{description:(e=S._('A message button will appear on your profile so others can message you.', 'profile.Messages.description', 'Settings toggle for enabling messages receival on bussines profile'),M&&(e+=" "+(S._('Change how you receive messages below.', 'settings.messagingPermissions.businessSetting.description.enabled', 'Additional line for business message setting when setting is enabled'))),e),heading:S._('Allow others to message my business', 'profile.Messages.title', 'Settings toggle for enabling messages receival on bussines profile'),headingAccessibilityLevel:2,onChange:function(){var e,s=!M;O(s),P((0,v._L)({field:"enable_profile_message",value:s,onSettingSavedHn:function(){L(function(e){var s=e.hideToast;return(0,y.jsx)(l.ZP,{duration:b.hN,onHide:s,text:S._('Message settings saved', 'profile.SocialPermissions.Messages.ToastMessage', 'Name of setting being saved for confirmation toast')})})},showErrorHn:function(){},surfaceTag:h.i.SETTINGS,userId:null!==(e=I.id)&&void 0!==e?e:""}))},switched:!!M,switchId:"partner-messages-switch"})}),W&&(0,y.jsxs)(n.Fragment,{children:[B.map(function(e){return G({groupId:e.group_id,selectedLevelId:e.selected_level})}),F.map(function(e){return R({groupId:e.group_id})}),(0,y.jsxs)(o.xu,{"data-test-id":"blocked-accounts-message-setting",marginBottom:6,children:[(0,y.jsx)(o.X6,{accessibilityLevel:2,size:"400",children:S._('Blocked accounts', 'settings.messagingPermissions.blockedAccounts.subHeader', 'Subheader for note on blocked accounts behavior for messaging permissions')}),(0,y.jsx)(o.xu,{marginTop:2,children:(0,y.jsx)(o.xv,{color:"subtle",children:S._('Note: Accounts you\'ve blocked on Pinterest can\'t message you. To unblock an account, go to their profile.', 'settings.messagingPermissions.blockedAccounts.description', 'Description for blocked accounts behavior for messaging permissions')})})]})]})]})]})}}},function(e){e.O(0,[97270,84404,28038,24797,55169,88166,44801,97456],function(){return e(e.s=892325)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/settings/messages-d5ea2f63a68c668f.js.map