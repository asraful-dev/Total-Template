(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[34419],{592874:function(e,t,r){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/settings/mfa/[step]"]=function(){return r(216576).Z}},549629:function(e,t,r){"use strict";r.d(t,{Q:function(){return d},Z:function(){return f}});var n=r(672652),o=r(587703),i=r(525364),a=r(996523),l=r(5859);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t){var r=(0,i.sV)().setViewContextData,s=(0,l.B)().requestIdentifier,c=(0,o.Z)(),d=(0,i.SU)().viewData;(0,n.useEffect)(function(){if(e){var t;r({viewType:null!==(t=e.view_type)&&void 0!==t?t:1,viewParameter:e.view_parameter,viewData:e.view_data?(0,a.Z)(d,e.view_data):d,component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),c(u(u({},e),{},{event_type:13,request_identifier:s}))}},[t])}function f(e){var t=e.children;return d(e.log),t||null}},301928:function(e,t){"use strict";t.Z=function(e){return"confirmed"===e}},996523:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:function(){return function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},l=a(t,r);return void 0!==l?l:void 0===r?t:Array.isArray(t)&&Array.isArray(r)?r.reduce(function(t,n,o){return t[o]=e(t[o],r[o],a),t},function(e){if(Array.isArray(e))return i(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):t&&"object"===o(t)&&r&&"object"===o(r)?Object.keys(r).reduce(function(t,n){return t[n]=e(t[n],r[n],a),t},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t)):r}}})},369427:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(672652),o=r(684404),i=r(587703),a=r(107366),l=r(454514),s=r(140017),c=r(165706),u=r(13848),d=r(149722),f=r(930837),_=r(339001),h=r(432242),m=r(819267);function p(e){var t=e.onResend,r=e.onHide,n=e.email,i=(0,s.ZP)(),a=i._('Check your email', 'settings.mfa.CheckEmailModal.titleText', 'Title in a modal to inform the user to check their email account and check for a Pinterest email'),l=(0,_.nk)(i._('We sent instructions to pick a new password to {{ email }}', 'settings.mfa.CheckEmailModal.bodyText', 'Description in a modal to inform the user to check their email account and check for a Pinterest email email:Pinner email where the instructions email was sent'),{email:(0,m.jsx)(o.xv,{align:"center",inline:!0,weight:"bold",children:(0,h.B)(n)},"check-email-modal-pinner-masked-email")});return(0,m.jsx)(f.ZP,{accessibilityModalLabel:a,onDismiss:r,size:"md",children:(0,m.jsxs)(o.xu,{paddingX:4,paddingY:8,children:[(0,m.jsx)(o.xu,{marginBottom:3,children:(0,m.jsx)(o.X6,{accessibilityLevel:1,align:"center",size:"400",children:a})}),(0,m.jsx)(o.xu,{marginBottom:8,children:(0,m.jsx)(o.xv,{align:"center",children:l})}),(0,m.jsxs)(o.kC,{gap:{row:2,column:0},justifyContent:"center",children:[(0,m.jsx)(o.zx,{onClick:t,size:"lg",text:i._('Resend email', 'settings.mfa.CheckEmailModal.button.resendEmail', 'Button text to resend the instructions email')}),(0,m.jsx)(o.zx,{color:"red",onClick:r,size:"lg",text:i._('Okay', 'settings.mfa.CheckEmailModal.button.okay', 'Button text to dismiss the check email modal')})]})]})})}var g=r(19434);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.isDisableStep,r=void 0!==t&&t,f=e.afterPasswordSubmit,_=e.viewType,h=e.viewParameter,b=(0,s.ZP)(),v=(0,u.F9)().showOneToast,x=(0,i.Z)(),A=b._('Sorry, something went wrong', 'settings.MFA.ConfirmPassword.toast.error', 'Toast message for error when trying to send the forget password email'),j=(0,d.Z)(),w=j.email,P=j.username,C=y((0,n.useState)(""),2),S=C[0],z=C[1],E=y((0,n.useState)([]),2),O=E[0],F=E[1],M=y((0,n.useState)(!1),2),T=M[0],D=M[1],I=y((0,n.useState)(!1),2),k=I[0],N=I[1];(0,n.useEffect)(function(){x({event_type:13,view_type:_,view_parameter:h})},[]);var B=function(e){var t=e.isResend;T||(D(!0),t&&x({view_type:_,view_parameter:h,element:12920,event_type:102}),(0,a.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:P}}).then(function(){N(!0),D(!1),t&&v(function(e){var t=e.hideToast;return(0,m.jsx)(l.ZP,{onHide:t,text:b._('Email sent!', 'settings.MFA.ConfirmPassword.toast.success', 'Toast message for success when trying to send the forget password email')})})},function(e){var t="string"==typeof e.message?e.message:A;D(!1),v(function(e){var r=e.hideToast;return(0,m.jsx)(l.ZP,{onHide:r,text:t,type:"error"})})}))};return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(c.FixedHeader,{zIndexForGestaltBug:2,children:(0,m.jsx)(g.default,{heading:r?b._('Two-factor authentication', 'settings.MFA.Disable.ConfirmPassword.header', 'Header for the disable 2fa flow page'):b._('Step 1 of 3', 'settings.MFA.Enable.ConfirmPassword.header', 'Step counter for the enable 2fa flow page'),legoSettingsEnabled:!0})}),(0,m.jsxs)(o.kC,{direction:"column",flex:"grow",justifyContent:"between",children:[(0,m.jsxs)(o.xu,{marginBottom:10,children:[(0,m.jsxs)(o.xu,{"data-test-id":"confirm-password-2fa",marginBottom:11,paddingX:4,children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.__,{htmlFor:"confirmPassword",children:(0,m.jsx)(o.X6,{accessibilityLevel:2,align:"center",size:"500",children:b._('Confirm your password', 'settings.MFA.ConfirmPassword.Title', 'Title of the Confirm your password step on 2fa flow')})})}),(0,m.jsx)(o.xu,{marginBottom:10,children:(0,m.jsx)(o.xv,{align:"center",size:"200",children:r?b._('To turn off multi-factor authentication, you must first confirm your password', 'settings.MFA.ConfirmPassword.Description.disable', 'Description of the Confirm your password step on 2fa flow'):b._('To turn on multi-factor authentication, you must first confirm your password', 'settings.MFA.ConfirmPassword.Description', 'Description of the Confirm your password step on 2fa flow')})})]}),(0,m.jsxs)(o.xu,{paddingX:2,children:[(0,m.jsx)(o.xu,{marginBottom:2,position:"relative",children:(0,m.jsx)(o.nv,{autoComplete:"current-password",errorMessage:O[0],id:"confirmPassword",onChange:function(e){return z(e.value)},size:"lg",type:"password",value:S})}),(0,m.jsx)(o.xu,{children:(0,m.jsx)(o.kC,{alignContent:"center",direction:"column",children:(0,m.jsx)(o.xu,{alignSelf:"center",width:150,children:(0,m.jsx)(o.iP,{onTap:function(){x({view_type:_,view_parameter:h,element:10881,event_type:102}),B({isResend:!1})},tapStyle:"compress",children:(0,m.jsx)(o.xu,{paddingY:2,children:(0,m.jsx)(o.xv,{align:"center",size:"200",underline:!0,weight:"bold",children:b._('Forgot it?', 'settings.MFA.ConfirmPassword.ForgotIt', 'Asking the pinner if they forgot their password')})})})})})})]})]}),(0,m.jsx)(o.xu,{paddingX:2,paddingY:4,children:(0,m.jsx)(o.zx,{color:"red",disabled:!S||!S.length||T,fullWidth:!0,onClick:function(){var e={password:S};x({view_type:_,view_parameter:h,element:96,event_type:102}),D(!0),F([]),r?(0,a.Z)({url:"/v3/users/settings/mfa/disable/",method:"POST",data:e}).then(function(){f(S)}).catch(function(e){F([e.message_detail])}).finally(function(){D(!1)}):(0,a.Z)({url:"v3/users/password/verify/",method:"POST",data:e}).then(function(){f(S)}).catch(function(e){F([e.message])}).finally(function(){D(!1)})},text:b._('Next', 'settings.MFA.Enable.ConfirmPassword.SendButton', 'CTA to submit password on confirm password page at 2fa flow')})})]}),k?(0,m.jsx)(p,{email:w||"",onHide:function(){return N(!1)},onResend:function(){return B({isResend:!0})}}):null]})}},216576:function(e,t,r){"use strict";r.d(t,{Z:function(){return q}});var n=r(672652),o=r(328038),i=r(301928),a=r(454514),l=r(140017),s=r(179425),c=r(13848),u=r(554786),d=r(684404),f=r(587703),_=r(549629),h=r(339001),m=r(165706),p=r(58423),g=r(19434),y=r(819267);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var x=function(e){var t=e.userEmail,r=e.afterEmailValidated,o=e.viewParameter,i=e.viewType,a=(0,l.ZP)(),s=(0,f.Z)(),c=b((0,n.useState)(""),2),u=c[0],v=c[1],x=b((0,n.useState)(""),2),A=x[0],j=x[1],w=b((0,n.useState)(!1),2),P=w[0],C=w[1];return(0,_.Q)({view_type:i,view_parameter:o}),(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(m.FixedHeader,{zIndexForGestaltBug:2,children:(0,y.jsx)(g.default,{heading:a._('Two-factor authentication', 'settings.MFA.Enable.ConfirmEmail.header', 'Header for the disable 2fa flow page'),legoSettingsEnabled:!0})}),(0,y.jsxs)(d.kC,{direction:"column",flex:"grow",justifyContent:"between",children:[(0,y.jsxs)(d.xu,{marginBottom:10,children:[(0,y.jsxs)(d.xu,{"data-test-id":"confirm-email-2fa",marginBottom:11,paddingX:4,children:[(0,y.jsx)(d.xu,{marginBottom:2,children:(0,y.jsx)(d.__,{htmlFor:"confirmEmail",children:(0,y.jsx)(d.X6,{accessibilityLevel:2,align:"center",size:"500",children:A.length?a._('Hmm...another try?', 'settings.MFA.ConfirmEmail.Title.error', 'Title for the enable 2fa flow page - Confirm your email step'):a._('Confirm your email', 'settings.MFA.ConfirmEmail.Title', 'Title for the enable 2fa flow page - Confirm your email step')})})}),(0,y.jsx)(d.xu,{marginBottom:10,children:(0,y.jsx)(d.xv,{align:"center",size:"200",children:A.length?a._('To set up 2FA, enter the email connected to your Pinterest account', 'settings.MFA.Enable.ConfirmEmail.Description.error', 'Description of the enable 2fa flow page - Confirm your email step'):a._('In order to maintain access to your account please confirm your email', 'settings.MFA.Enable.ConfirmEmail.Description', 'Description of the enable 2fa flow page - Confirm your email step')})})]}),(0,y.jsx)(d.xu,{paddingX:2,children:(0,y.jsx)(d.xu,{marginBottom:2,position:"relative",children:(0,y.jsx)(d.nv,{errorMessage:A,id:"confirmEmail",label:a._('Email', 'settings.MFA.Enable.ConfirmEmail.input.label', 'Input label for the Email field on confirm email page at 2fa enable flow'),onChange:function(e){return v(e.value)},placeholder:a._('Enter your email', 'settings.MFA.Enable.ConfirmEmail.input.placeholder', 'Input placeholder for the Email field on confirm email page at 2fa enable flow'),size:"lg",type:"text",value:u})})})]}),(0,y.jsx)(d.xu,{paddingX:2,paddingY:4,children:(0,y.jsx)(d.zx,{color:"red",disabled:!u||!u.length||P,fullWidth:!0,onClick:function(){if(s({view_type:i,view_parameter:o,element:96,event_type:102}),C(!0),!u.match(p.EMAIL_REGEX)){j(a._('Not a valid email.', 'profile.Settings.Edit.Email.Error.Shouldnt.Match.Username', 'Error message while changing email, when email matches username')),C(!1);return}u.toLowerCase()===t.toLowerCase()?(s({view_type:i,view_parameter:o,event_type:10247}),r()):(s({view_type:i,view_parameter:o,element:13332,event_type:13}),j((0,h.nk)(a._('{{ UpdateEmailLink }} in account settings.', 'settings.MFA.Enable.ConfirmEmail.errorMessage', 'Error message to be displayed if the user email wont match against the one typed. UpdateEmailLink: link to the Pinterest account management page'),{UpdateEmailLink:(0,y.jsx)(d.rU,{display:"inlineBlock",href:"/settings/account-settings/",onClick:function(){s({view_type:i,view_parameter:o,element:13333,event_type:102})},target:"self",underline:"none",children:(0,y.jsx)("strong",{children:a._('Update your email address', 'settings.MFA.Enable.ConfirmEmail.errorMessage.link', 'Text for link to account management page')})},"updateEmailLink")})),C(!1))},text:a._('Next', 'settings.MFA.Enable.ConfirmEmail.SendButton', 'CTA to submit password on confirm email page at 2fa flow')})})]})]})},A=r(107366),j=r(5859);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var C=(0,n.createContext)(),S=(0,n.createContext)();function z(e){var t=e.children,r=w((0,n.useState)("confirm-password"),2),o=r[0],i=r[1],a=w((0,n.useState)(!1),2),l=a[0],s=a[1],c=w((0,n.useState)(""),2),u=c[0],d=c[1],f=w((0,n.useState)(""),2),_=f[0],h=f[1],m=(0,n.useMemo)(function(){return{currentStep:o,isEmailValid:l,countryCode:_,countryPhoneCode:u}},[o,l,_,u]),p=(0,n.useMemo)(function(){return{setCurrentStep:i,setIsEmailValid:s,setCountryCode:h,setCountryPhoneCode:d}},[]);return(0,y.jsx)(C.Provider,{value:m,children:(0,y.jsx)(S.Provider,{value:p,children:t})})}function E(){var e=(0,n.useContext)(C);if(void 0===e)throw Error("useMfaState must be used within a MfaStateContext");return e}function O(){var e=(0,n.useContext)(S);if(void 0===e)throw Error("useMfaUpdater must be used within a MfaStateContext");return e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t=e.afterPhoneNumberSubmit,r=e.onCountryCodeTouch,o=e.password,i=e.userEmail,a=(0,l.ZP)(),s=(0,f.Z)(),c=(0,j.B)().isRTL,u=E().countryPhoneCode,_=F((0,n.useState)(""),2),h=_[0],p=_[1],b=F((0,n.useState)([]),2),v=b[0],x=b[1],w=F((0,n.useState)(!1),2),P=w[0],C=w[1];return(0,n.useEffect)(function(){s({event_type:13,view_type:562,view_parameter:3730})},[s]),(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(m.FixedHeader,{zIndexForGestaltBug:2,children:(0,y.jsx)(g.default,{heading:a._('Step 2 of 3', 'settings.MFA.Enable.AddPhoneNumber.header', 'Step counter for the enable 2fa flow page'),legoSettingsEnabled:!0})}),(0,y.jsxs)(d.kC,{direction:"column",flex:"grow",justifyContent:"between",children:[(0,y.jsxs)(d.xu,{marginBottom:10,children:[(0,y.jsxs)(d.xu,{"data-test-id":"add-phone-number-2fa",marginBottom:11,paddingX:10,children:[(0,y.jsx)(d.xu,{marginBottom:2,children:(0,y.jsx)(d.X6,{accessibilityLevel:2,align:"center",size:"500",children:a._('Add phone number', 'settings.MFA.AddPhoneNumber.Title', 'Title of the Add phone number step on 2fa flow')})}),(0,y.jsx)(d.xu,{children:(0,y.jsx)(d.xv,{align:"center",size:"200",children:a._('This is where we\u2019ll text your login security codes', 'settings.MFA.AddPhoneNumber.Description', 'Description of the  Add phone number step on 2fa flow')})})]}),(0,y.jsxs)(d.xu,{paddingX:2,children:[(0,y.jsxs)(d.xu,{marginBottom:4,children:[(0,y.jsx)(d.xu,{marginBottom:2,children:(0,y.jsx)(d.xv,{align:"center",size:"200",children:a._('Country code', 'settings.MFA.AddPhoneNumber.countryCodeField', 'Country code for the add phone number step on 2fa flow')})}),(0,y.jsx)(d.iP,{onTap:function(e){var t=e.event;t.preventDefault(),t.stopPropagation(),s({view_type:562,view_parameter:3730,element:12921,event_type:102}),r()},children:(0,y.jsxs)(d.kC,{alignItems:"center",justifyContent:"center",children:[(0,y.jsx)(d.xu,{marginEnd:2,children:u?(0,y.jsx)(d.xv,{size:"400",children:u}):(0,y.jsx)(d.xv,{color:"subtle",size:"400",children:a._('Choose', 'settings.MFA.AddPhoneNumber.countryCode.Placeholder', 'Placeholder for the countryCode field')})}),(0,y.jsx)(d.xu,{left:c,right:!c,children:(0,y.jsx)(d.JO,{accessibilityLabel:a._('Go to Country code selection Page to select the country code for your phone number', 'settings.MFA.AddPhoneNumber.goToCountryCodeSelection', 'Accessibility label for the icon that redirect the user to the country code selection page'),color:"default",icon:"arrow-forward"})})]})})]}),(0,y.jsxs)(d.xu,{children:[(0,y.jsx)(d.xu,{marginBottom:2,children:(0,y.jsx)(d.__,{htmlFor:"phoneNumber",children:(0,y.jsx)(d.xv,{align:"center",size:"200",children:a._('Phone', 'settings.MFA.AddPhoneNumber.phoneField', 'Phone Field for the add phone number step on 2fa flow')})})}),(0,y.jsx)(d.nv,{errorMessage:v[0],id:"phoneNumer",onChange:function(e){return p(e.value)},placeholder:a._('Phone number', 'AddPhoneNumberStep.TextField.PhoneNumber', 'placeholder text for phone number'),size:"lg",type:"tel",value:h})]})]})]}),(0,y.jsx)(d.xu,{paddingX:2,paddingY:4,children:(0,y.jsx)(d.zx,{color:"red",disabled:!h||!h.length||!u||P,fullWidth:!0,onClick:function(){s({view_type:562,view_parameter:3730,element:96,event_type:102}),C(!0),x([]),(0,A.Z)({url:"/v3/users/settings/mfa/",method:"POST",data:{password:o,number:h,country:u,email_input:i}}).then(function(){return t("".concat(u).concat(h))},function(e){C(!1),x([e.message])})},text:a._('Next', 'settings.MFA.Enable.ConfirmPassword.SendButton', 'CTA to submit password on confirm password page at 2fa flow')})})]})]})},D=r(369427),I=r(224796),k=r(191313);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var R=function(e){var t,r=e.password,o=e.phoneNumber,i=e.userEmail,s=e.afterVerificationCodeSubmit,u=(0,l.ZP)(),_=(0,c.F9)().showOneToast,p=(0,f.Z)(),b=u._('Sorry, something went wrong', 'settings.MFA.ConfirmVerificationCode.toast.error', 'Default toast message for error when trying to resend the verification code'),v=u._('Code resent!', 'settings.MFA.ConfirmVerificationCode.toast.codeResent', 'Default toast message for code resend'),x=N((0,n.useState)(""),2),j=x[0],w=x[1],P=N((0,n.useState)([]),2),C=P[0],S=P[1],z=N((0,n.useState)(!1),2),E=z[0],O=z[1],F=N((0,n.useState)(!1),2),M=F[0],T=F[1];return((0,n.useEffect)(function(){p({event_type:13,view_type:562,view_parameter:3731})},[p]),E)?(0,y.jsx)(d.kC,{alignContent:"center",alignItems:"stretch",direction:"column",height:"100vh",justifyContent:"center",width:"100vw",children:(0,y.jsxs)(d.xu,{children:[(0,y.jsx)(d.xu,{marginBottom:10,children:(0,y.jsx)(d.$j,{accessibilityLabel:u._('Verifying if code is valid', 'settings.MFA.ConfirmVerificationCode.verifyingCode.loading', 'Loading state for when the verification code is sent and is being validated'),show:!0})}),(0,y.jsx)(d.xv,{align:"center",size:"400",weight:"bold",children:u._('Verifying...', 'settings.MFA.ConfirmVerificationCode.verifyingCode.text', 'Loading state Title for when the verification code is sent and is being validated')})]})}):(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(m.FixedHeader,{zIndexForGestaltBug:2,children:(0,y.jsx)(g.default,{heading:u._('Step 3 of 3', 'settings.MFA.Enable.ConfirmVerificationCode.header', 'Step counter for the enable 2fa flow page'),legoSettingsEnabled:!0})}),(0,y.jsx)(d.kC,{direction:"column",flex:"grow",justifyContent:"between",children:(0,y.jsxs)(d.xu,{marginBottom:10,children:[(0,y.jsxs)(d.xu,{"data-test-id":"confirm-verification-code-2fa",marginBottom:11,paddingX:5,children:[(0,y.jsx)(d.xu,{marginBottom:2,children:(0,y.jsx)(d.__,{htmlFor:"verificationCode",children:(0,y.jsx)(d.X6,{accessibilityLevel:2,align:"center",size:"500",children:u._('Enter verification code', 'settings.MFA.ConfirmVerificationCode.Title', 'Title of the Enter verification code step on 2fa flow')})})}),(0,y.jsx)(d.xu,{marginBottom:10,paddingX:8,children:(0,y.jsx)(d.xv,{align:"center",size:"200",children:(0,h.nk)(u._('Now enter the code we just texted to {{ phoneNumber }}.', 'settings.MFA.ConfirmVerificationCode.Description', 'Description of the Enter verification code step on 2fa flow phoneNumber:User masked phone number from previous step'),{phoneNumber:(t=o.substr(o.length-3),"XXXX".concat(t))})})})]}),(0,y.jsxs)(d.xu,{paddingX:2,children:[(0,y.jsx)(d.xu,{marginBottom:2,position:"relative",children:(0,y.jsx)(d.nv,{errorMessage:C[0],id:"verificationCode",onChange:function(e){return w(e.value)},size:"lg",type:"text",value:j})}),(0,y.jsx)(d.xu,{children:(0,y.jsx)(d.xu,{children:(0,y.jsx)(d.kC,{alignContent:"center",direction:"column",children:(0,y.jsx)(d.xu,{alignSelf:"center",width:150,children:(0,y.jsx)(d.iP,{disabled:M||E,onTap:function(){M||(w(""),T(!0),p({view_type:562,view_parameter:3731,element:12920,event_type:102}),(0,A.Z)({url:"/v3/users/settings/mfa/resend/",method:"POST"}).then(function(e){T(!1);var t=(e.resource_response.data||{}).message||v;_(function(e){var r=e.hideToast;return(0,y.jsx)(a.ZP,{onHide:r,text:t})})},function(e){var t="string"==typeof e.message?e.message:b;T(!1),_(function(e){var r=e.hideToast;return(0,y.jsx)(a.ZP,{onHide:r,text:t,type:"error"})})}))},tapStyle:"compress",children:(0,y.jsx)(d.xu,{paddingY:2,children:(0,y.jsx)(d.xv,{align:"center",size:"200",underline:!0,weight:"bold",children:u._('Resend code?', 'settings.MFA.ConfirmVerificationCode.ResendCode', 'Button to resend the code')})})})})})})})]})]})}),(0,y.jsx)(d.xu,{marginBottom:4,paddingX:2,children:(0,y.jsx)(d.zx,{color:"red",disabled:!j||!j.length||E||M,fullWidth:!0,onClick:function(){p({view_type:562,view_parameter:3731,element:96,event_type:102}),O(!0),S([]),(0,A.Z)({url:"/v3/users/settings/mfa/verify/",method:"POST",data:{password:r,token:j,email_input:i}}).then(function(){p({event_type:9990,view_type:562,view_parameter:3731}),(0,k.L_)(I.ou),s()}).catch(function(e){S([e.message]),O(!1)})},text:u._('Verify', 'settings.MFA.Enable.ConfirmVerificationCode.SendButton', 'CTA to submit verification code on the Enter verification code at 2fa flow')})})]})},L=r(757640);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H(e){var t=e.isFirstItem,r=e.checked,n=e.heading,o=e.id,i=e.name,a=e.onChange;return(0,y.jsxs)(d.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginTop:t?0:6,paddingY:1,role:"listitem",children:[(0,y.jsx)(d.__,{htmlFor:o,children:(0,y.jsx)(d.X6,{accessibilityLevel:2,size:"400",children:n})}),(0,y.jsx)(d.FX.RadioButton,{checked:r,id:o,name:i,onChange:a,value:o})]})}var X=function(e){var t,r=e.afterCountryCodeSubmit,o=(0,l.ZP)(),i=E().countryCode,a=O(),s=a.setCountryCode,c=a.setCountryPhoneCode,u=(0,L.Z)({name:"ApiResource",options:{url:"/v3/countries/phone_codes/"}}),f=u.data,_=u.isLoaded,h=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(i))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=h[0],b=h[1],v=function(e,t){b(e),s(e),c(t),r()};return _?(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(m.FixedHeader,{zIndexForGestaltBug:2,children:(0,y.jsx)(g.default,{heading:o._('Country Code', 'settings.MFA.Enable.CountryCode.header', 'Step counter for the enable 2fa flow page'),legoSettingsEnabled:!0})}),(0,y.jsx)(d.xu,{"data-test-id":"2fa-phone-number-country-code",marginTop:2,paddingX:2,role:"list",children:(0,y.jsx)(d.FX,{id:"2fa-phone-number-country-code-radio-options",legend:o._('Country Code', 'settings.MFA.Enable.CountryCode.header', 'Step counter for the enable 2fa flow page'),legendDisplay:"hidden",children:(f||[]).map(function(e,t){return(0,y.jsx)(H,{checked:e.code===p,heading:e.phone_code_label,id:"countryCode-".concat(e.phone_code_label),isFirstItem:0===t,name:"country_code",onChange:function(){return v(e.code,e.phone_code)}},"countryCode-option-".concat(e.phone_code_label))})})})]}):(0,y.jsx)(d.kC,{alignContent:"center",alignItems:"stretch",direction:"column",height:"100vh",justifyContent:"center",width:"100vw",children:(0,y.jsx)(d.$j,{accessibilityLabel:o._('Loading Country Code list', 'settings.MFA.Enable.CountryCode.loading', 'Loading state for the Country Code selection lsit'),show:!0})})},U=r(386008);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $={CONFIRM_EMAIL:"confirm-email",CONFIRM_PASSWORD:"confirm-password",ADD_PHONE_NUMBER:"add-phone-number",ADD_PHONE_COUNTRY_CODE:"add-phone-country-code",VERIFICATION_CODE:"verification-code"},Y=Object.values($);function G(){var e,t=(0,l.ZP)(),r=(0,c.F9)().showToast,d=(0,o.$B)(),f=(0,o.k6)(),_=E(),h=_.currentStep,m=_.isEmailValid,p=O(),g=p.setCurrentStep,b=p.setIsEmailValid,v=V((0,n.useState)(""),2),A=v[0],j=v[1],w=V((0,n.useState)(""),2),P=w[0],C=w[1],S=null!==(e=(0,U.Tt)())&&void 0!==e?e:Object.freeze({}),z=S.email,F=S.email_status,M=(0,u.HG)(),I=function(e){var t="/settings/mfa/".concat(e);f.push(t)},k=function(){var e=d.params.step;if(!Y.includes(e)){f.push("/settings/security");return}var t=(0,i.Z)(F||"")?$.CONFIRM_PASSWORD:$.CONFIRM_EMAIL;m||e===$.CONFIRM_EMAIL||e===$.CONFIRM_PASSWORD?e!==h&&g(e||t):(g(t),I(t))};return((0,n.useEffect)(function(){k()},[d]),M)?(0,y.jsx)(o.l_,{to:"/settings/security"}):(0,y.jsxs)(s.default,{hasFixedHeader:!0,children:[h===$.CONFIRM_EMAIL?(0,y.jsx)(x,{afterEmailValidated:function(){return I($.CONFIRM_PASSWORD)},userEmail:z||"",viewParameter:3806,viewType:562}):null,h===$.CONFIRM_PASSWORD?(0,y.jsx)(D.Z,{afterPasswordSubmit:function(e){j(e),b(!0),I($.ADD_PHONE_NUMBER)},viewParameter:3729,viewType:562}):null,h===$.ADD_PHONE_NUMBER?(0,y.jsx)(T,{afterPhoneNumberSubmit:function(e){C(e),I($.VERIFICATION_CODE)},onCountryCodeTouch:function(){return I($.ADD_PHONE_COUNTRY_CODE)},password:A,userEmail:z||""}):null,h===$.ADD_PHONE_COUNTRY_CODE?(0,y.jsx)(X,{afterCountryCodeSubmit:function(){return I($.ADD_PHONE_NUMBER)}}):null,h===$.VERIFICATION_CODE?(0,y.jsx)(R,{afterVerificationCodeSubmit:function(){r(function(e){var r=e.hideToast;return(0,y.jsx)(a.ZP,{duration:4e3,onHide:r,text:t._('Two-factor authentication has been turned on', 'mfa.turnedOn.success', 'Toast message for successfully enabling 2fa')})}),f.push("/settings/security")},password:A,phoneNumber:P,userEmail:z||""}):null]})}var q=function(){return(0,y.jsx)(z,{children:(0,y.jsx)(G,{})})}}},function(e){e.O(0,[97270,84404,28038,24797,55169,88166,44801,2909,63696,81936,98487,54041,5297],function(){return e(e.s=592874)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/settings/mfa/[step]-e4c04d71977cf854.js.map